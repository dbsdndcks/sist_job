/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: Apache Tomcat/9.0.86
 * Generated at: 2024-05-23 06:59:31 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp.asd.admin.jsp;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;
import admin.DAO.TheaterDAO;
import VO.TheaterVO;
import java.util.List;

public final class theater_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent,
                 org.apache.jasper.runtime.JspSourceImports {

  public java.lang.String getServletInfo() {
    return "명화관 관리자 영화관리";
  }

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  static {
    _jspx_dependants = new java.util.HashMap<java.lang.String,java.lang.Long>(3);
    _jspx_dependants.put("/asd/admin/jsp/sidebar.jsp", Long.valueOf(1715754754189L));
    _jspx_dependants.put("/asd/admin/jsp/footer.jsp", Long.valueOf(1715750612819L));
    _jspx_dependants.put("/asd/admin/jsp/topbar.jsp", Long.valueOf(1715750612819L));
  }

  private static final java.util.Set<java.lang.String> _jspx_imports_packages;

  private static final java.util.Set<java.lang.String> _jspx_imports_classes;

  static {
    _jspx_imports_packages = new java.util.LinkedHashSet<>(3);
    _jspx_imports_packages.add("javax.servlet");
    _jspx_imports_packages.add("javax.servlet.http");
    _jspx_imports_packages.add("javax.servlet.jsp");
    _jspx_imports_classes = new java.util.LinkedHashSet<>(3);
    _jspx_imports_classes.add("admin.DAO.TheaterDAO");
    _jspx_imports_classes.add("java.util.List");
    _jspx_imports_classes.add("VO.TheaterVO");
  }

  private volatile javax.el.ExpressionFactory _el_expressionfactory;
  private volatile org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public java.util.Set<java.lang.String> getPackageImports() {
    return _jspx_imports_packages;
  }

  public java.util.Set<java.lang.String> getClassImports() {
    return _jspx_imports_classes;
  }

  public javax.el.ExpressionFactory _jsp_getExpressionFactory() {
    if (_el_expressionfactory == null) {
      synchronized (this) {
        if (_el_expressionfactory == null) {
          _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
        }
      }
    }
    return _el_expressionfactory;
  }

  public org.apache.tomcat.InstanceManager _jsp_getInstanceManager() {
    if (_jsp_instancemanager == null) {
      synchronized (this) {
        if (_jsp_instancemanager == null) {
          _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
        }
      }
    }
    return _jsp_instancemanager;
  }

  public void _jspInit() {
  }

  public void _jspDestroy() {
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
      throws java.io.IOException, javax.servlet.ServletException {

    if (!javax.servlet.DispatcherType.ERROR.equals(request.getDispatcherType())) {
      final java.lang.String _jspx_method = request.getMethod();
      if ("OPTIONS".equals(_jspx_method)) {
        response.setHeader("Allow","GET, HEAD, POST, OPTIONS");
        return;
      }
      if (!"GET".equals(_jspx_method) && !"POST".equals(_jspx_method) && !"HEAD".equals(_jspx_method)) {
        response.setHeader("Allow","GET, HEAD, POST, OPTIONS");
        response.sendError(HttpServletResponse.SC_METHOD_NOT_ALLOWED, "JSP들은 오직 GET, POST 또는 HEAD 메소드만을 허용합니다. Jasper는 OPTIONS 메소드 또한 허용합니다.");
        return;
      }
    }

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html; charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("<!DOCTYPE html>\r\n");
      out.write("<html>\r\n");
      out.write("<head>\r\n");
      out.write("<meta charset=\"UTF-8\">\r\n");
      out.write("<title>명화관 관리자 페이지</title>\r\n");
      out.write("<link rel=\"icon\" href=\"http://localhost/theater_prj/asd/favicon.ico\">\r\n");
      out.write("<!--bootstrap 시작-->\r\n");
      out.write("<link\r\n");
      out.write("	href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\"\r\n");
      out.write("	rel=\"stylesheet\"\r\n");
      out.write("	integrity=\"sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\"\r\n");
      out.write("	crossorigin=\"anonymous\">\r\n");
      out.write("<script\r\n");
      out.write("	src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"\r\n");
      out.write("	integrity=\"sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\"\r\n");
      out.write("	crossorigin=\"anonymous\"></script>\r\n");
      out.write("<!--bootstrap 끝-->\r\n");
      out.write("<!--jQuery CDN 시작-->\r\n");
      out.write("<script\r\n");
      out.write("	src=\"https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js\"></script>\r\n");
      out.write("<!--jQuery CDN 끝-->\r\n");
      out.write("\r\n");
      out.write("<!-- Custom fonts for this template-->\r\n");
      out.write("<link href=\"../vendor/fontawesome-free/css/all.min.css\" rel=\"stylesheet\"\r\n");
      out.write("	type=\"text/css\">\r\n");
      out.write("<link\r\n");
      out.write("	href=\"https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i\"\r\n");
      out.write("	rel=\"stylesheet\">\r\n");
      out.write("<!-- Custom styles for this template-->\r\n");
      out.write("<link href=\"../css/sb-admin-2.css\" rel=\"stylesheet\">\r\n");
      out.write("<style type=\"text/css\">\r\n");
      out.write(".theater {\r\n");
      out.write("	display: flex;\r\n");
      out.write("	justify-content: center;\r\n");
      out.write("	flex-direction: column;\r\n");
      out.write("	align-items: center;\r\n");
      out.write("	height: 800px; /* 원하는 높이 설정 */\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write(".screen-container {\r\n");
      out.write("	display: flex;\r\n");
      out.write("	justify-content: center;\r\n");
      out.write("	height: 100px; /* 원하는 높이 설정 */\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write(".empty-container {\r\n");
      out.write("	display: flex;\r\n");
      out.write("	justify-content: flex-end; /* 우측 정렬 */\r\n");
      out.write("	height: 200px; /* 원하는 높이 설정 */\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write(".viewSeat {\r\n");
      out.write("	display: flex;\r\n");
      out.write("	justify-content: center;\r\n");
      out.write("	height: 200px; /* 원하는 높이 설정 */\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write(".seat-container {\r\n");
      out.write("	position: relative; /* 좌석 컨테이너를 상대적으로 위치시킴 */\r\n");
      out.write("	width: 600px; /* 좌석 컨테이너의 너비를 설정 (임의의 값) */\r\n");
      out.write("	height: 300px; /* 좌석 컨테이너의 높이를 설정 (임의의 값) */\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write(".screen {\r\n");
      out.write("	background-color: gray;\r\n");
      out.write("	color: white; /* 흰색으로 설정 */\r\n");
      out.write("	width: 700px; /* 원하는 너비 설정 */\r\n");
      out.write("	height: 50px; /* 원하는 높이 설정 */\r\n");
      out.write("	padding: 13px; /* 원하는 내부 여백 설정 */\r\n");
      out.write("	border-radius: 10px; /* 원하는 모서리 둥글기 설정 */\r\n");
      out.write("	margin-top: 50px;\r\n");
      out.write("	text-align: center; /* 가운데 정렬 */\r\n");
      out.write("	font-weight: bold; /* 진하게 설정 */\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write(".seat {\r\n");
      out.write("	width: 50px;\r\n");
      out.write("	height: 50px;\r\n");
      out.write("	margin: 10px;\r\n");
      out.write("	border: 1px solid black;\r\n");
      out.write("	cursor: pointer;\r\n");
      out.write("	position: absolute; /* 좌석을 절대적으로 위치시킴 */\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write(".seat:nth-child(n+11) {\r\n");
      out.write("	top: 100px; /* 두 번째 줄 좌석의 위치를 조절 */\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write(".second-row {\r\n");
      out.write("	margin-top: 20px; /* 두 번째 줄 좌석 위쪽 여백 추가 */\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write(".selected {\r\n");
      out.write("	background-color: red !important; /* 선택된 좌석의 배경색을 빨간색으로 설정 */\r\n");
      out.write("	color: white !important;\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write(".unavailable {\r\n");
      out.write("	background-color: gray; /* 예약 불가능한 좌석을 회색으로 설정 */\r\n");
      out.write("	color: white; /* 텍스트 색상을 흰색으로 설정 */\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write("#section1 {\r\n");
      out.write("	width: 300px; /* 원하는 너비 설정 */\r\n");
      out.write("	height: 70px; /* 원하는 높이 설정 */\r\n");
      out.write("	padding: 13px; /* 원하는 내부 여백 설정 */\r\n");
      out.write("	margin-left: 50px;\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write("#section2 {\r\n");
      out.write("	width: 300px; /* 원하는 너비 설정 */\r\n");
      out.write("	height: 70px; /* 원하는 높이 설정 */\r\n");
      out.write("	padding: 13px; /* 원하는 내부 여백 설정 */\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write(".row {\r\n");
      out.write("	display: flex;\r\n");
      out.write("	justify-content: space-between; /* 좌우 정렬 */\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write("#theaterName {\r\n");
      out.write("	width: 100px; /* 원하는 너비 설정 */\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write("#theaterNum {\r\n");
      out.write("	width: 100px; /* 원하는 너비 설정 */\r\n");
      out.write("}\r\n");
      out.write("</style>\r\n");
      out.write("\r\n");
      out.write("<script type=\"text/javascript\">\r\n");
      out.write("	$(document).ready(function() {\r\n");
      out.write("		// 영화관 선택 시 이벤트 핸들러 등록\r\n");
      out.write("		$(\"select[name='theaterName']\").change(searchTheaterNum);\r\n");
      out.write("\r\n");
      out.write("		// 버튼 클릭 시 좌석 저장 함수 호출\r\n");
      out.write("		$('#saveButton').off('click').on('click', function() {\r\n");
      out.write("			checkSeat(); // 버튼을 클릭할 때마다 좌석 저장 함수 호출\r\n");
      out.write("		});\r\n");
      out.write("\r\n");
      out.write("	});\r\n");
      out.write("\r\n");
      out.write("	function searchTheaterNum() {\r\n");
      out.write("		var request = new XMLHttpRequest(); // request 변수를 선언\r\n");
      out.write("\r\n");
      out.write("		request\r\n");
      out.write("				.open(\r\n");
      out.write("						\"Post\",\r\n");
      out.write("						\"http://localhost/theater_prj/TheaterNumSearchServlet?theaterName=\"\r\n");
      out.write("								+ encodeURIComponent(document\r\n");
      out.write("										.querySelector(\"select[name='theaterName']\").value),\r\n");
      out.write("						true);\r\n");
      out.write("		request.setRequestHeader(\"Content-Type\",\r\n");
      out.write("				\"application/x-www-form-urlencoded; charset=UTF-8\");\r\n");
      out.write("		request.onreadystatechange = function() {\r\n");
      out.write("			if (request.readyState == 4 && request.status == 200) {\r\n");
      out.write("				// 응답을 받으면 searchProcess 함수 호출하여 처리\r\n");
      out.write("				searchTheater(request);\r\n");
      out.write("			}\r\n");
      out.write("		};\r\n");
      out.write("		request.send(null);\r\n");
      out.write("\r\n");
      out.write("	}\r\n");
      out.write("\r\n");
      out.write("	function searchTheater(request) {\r\n");
      out.write("		var theaterNum = document.getElementById(\"theaterNum\");\r\n");
      out.write("		theaterNum.innerHTML = \"\"; // 이전 옵션 제거\r\n");
      out.write("\r\n");
      out.write("		// 서버에서 받은 JSON 데이터 파싱\r\n");
      out.write("		var object = JSON.parse(request.responseText);\r\n");
      out.write("		var result = object.result;\r\n");
      out.write("\r\n");
      out.write("		// 각 Theater 객체의 theaterNumber를 기반으로 옵션을 생성하여 추가\r\n");
      out.write("		for (var i = 0; i < result.length; i++) {\r\n");
      out.write("			var theaterNumber = result[i].value;\r\n");
      out.write("\r\n");
      out.write("			// 새로운 옵션 생성\r\n");
      out.write("			var option = document.createElement(\"option\");\r\n");
      out.write("			option.value = theaterNumber;\r\n");
      out.write("			option.text = theaterNumber;\r\n");
      out.write("\r\n");
      out.write("			// 옵션을 <select> 요소에 추가\r\n");
      out.write("			theaterNum.appendChild(option);\r\n");
      out.write("		}\r\n");
      out.write("	}\r\n");
      out.write("\r\n");
      out.write("	function searchTheaterSeat() {\r\n");
      out.write("		// 선택된 영화관과 상영관 정보 가져오기\r\n");
      out.write("		var selectedTheater = document.querySelector(\"select[name='theaterName']\").value;\r\n");
      out.write("\r\n");
      out.write("		var selectedTheaterNum = document.querySelector(\"select[name='theaterNum']\").value;\r\n");
      out.write("\r\n");
      out.write("		document.getElementById(\"name\").value = document.querySelector(\"select[name='theaterName']\").value;\r\n");
      out.write("		document.getElementById(\"number\").value = document.querySelector(\"select[name='theaterNum']\").value;\r\n");
      out.write("\r\n");
      out.write("		// 선택된 영화관과 상영관 정보를 표시할 요소 선택\r\n");
      out.write("		var selectedTheaterElement = document.getElementById('selectedTheather');\r\n");
      out.write("\r\n");
      out.write("		// 선택된 영화관과 상영관 정보 표시\r\n");
      out.write("		selectedTheaterElement.innerText = selectedTheater + ' '+ selectedTheaterNum + \" 관리중\";\r\n");
      out.write("\r\n");
      out.write("		var request = new XMLHttpRequest(); // request 변수를 선언\r\n");
      out.write("		// alert(document.querySelector(\"select[name='theaterName'] \").value);\r\n");
      out.write("\r\n");
      out.write("		request\r\n");
      out.write("				.open(\r\n");
      out.write("						\"Post\",\r\n");
      out.write("						\"http://localhost/theater_prj/TheaterSeatsSearchServlet\",true);\r\n");
      out.write("		request.setRequestHeader(\"Content-Type\",\r\n");
      out.write("				\"application/x-www-form-urlencoded; charset=UTF-8\");\r\n");
      out.write("		request.onreadystatechange = function() {\r\n");
      out.write("			if (request.readyState == 4 && request.status == 200) {\r\n");
      out.write("				// 응답을 받으면 searchProcess 함수 호출하여 처리\r\n");
      out.write("				searchSeat(request);\r\n");
      out.write("			}\r\n");
      out.write("		};\r\n");
      out.write("		request.send(\"theaterName=\" + encodeURIComponent(document.querySelector(\"select[name='theaterName']\").value)\r\n");
      out.write("			+ \"&theaterNum=\"+ encodeURIComponent(document.querySelector(\"select[name='theaterNum']\").value));\r\n");
      out.write("\r\n");
      out.write("	}\r\n");
      out.write("\r\n");
      out.write("	function searchSeat(request) {\r\n");
      out.write("		// 좌석을 생성할 부모 요소를 가져옵니다.\r\n");
      out.write("		var seatContainer = document.querySelector(\".seat-container\");\r\n");
      out.write("\r\n");
      out.write("		// 이전에 생성된 좌석을 모두 제거합니다.\r\n");
      out.write("		seatContainer.innerHTML = \"\";\r\n");
      out.write("\r\n");
      out.write("		// JSON 데이터를 받아와서 좌석 생성\r\n");
      out.write("		var object = JSON.parse(request.responseText);\r\n");
      out.write("\r\n");
      out.write("		var result = object.result;\r\n");
      out.write("\r\n");
      out.write("		//console.log(result);\r\n");
      out.write("\r\n");
      out.write("		var seatContainer = document.querySelector(\".seat-container\");\r\n");
      out.write("\r\n");
      out.write("		// 첫 번째 줄 좌석 생성\r\n");
      out.write("		for (var i = 0; i <= 9; i++) {\r\n");
      out.write("\r\n");
      out.write("			var seat = document.createElement(\"div\");\r\n");
      out.write("			seat.className = \"seat\";\r\n");
      out.write("			seat.style.left = i * 60 + \"px\";\r\n");
      out.write("			seat.style.textAlign = \"center\";\r\n");
      out.write("			seat.innerText = \"A\" + (i + 1);\r\n");
      out.write("\r\n");
      out.write("			if (result[i].ReservationStatus === \"N\") {\r\n");
      out.write("				seat.classList.add(\"unavailable\");\r\n");
      out.write("			} else {\r\n");
      out.write("				seat.classList.add(\"available\");\r\n");
      out.write("			}\r\n");
      out.write("\r\n");
      out.write("			seatContainer.appendChild(seat);\r\n");
      out.write("		}\r\n");
      out.write("\r\n");
      out.write("		// 두 번째 줄 좌석 생성\r\n");
      out.write("		for (var i = 10; i <= 19; i++) {\r\n");
      out.write("			var seat = document.createElement(\"div\");\r\n");
      out.write("			seat.className = \"seat second-row\";\r\n");
      out.write("			seat.style.left = (i - 10) * 60 + \"px\";\r\n");
      out.write("			seat.style.textAlign = \"center\";\r\n");
      out.write("			seat.innerText = \"B\" + (i - 9);\r\n");
      out.write("\r\n");
      out.write("			if (result[i].ReservationStatus === \"N\") {\r\n");
      out.write("				seat.classList.add(\"unavailable\");\r\n");
      out.write("			} else {\r\n");
      out.write("				seat.classList.add(\"available\");\r\n");
      out.write("\r\n");
      out.write("			}\r\n");
      out.write("			seatContainer.appendChild(seat);\r\n");
      out.write("		}\r\n");
      out.write("\r\n");
      out.write("		// 좌석을 클릭할 때 색 변경 이벤트 핸들러 등록\r\n");
      out.write("		$('.seat').off('click').on('click', function() {\r\n");
      out.write("\r\n");
      out.write("			$(this).toggleClass('selected');\r\n");
      out.write("			$('.seat').not(this).removeClass('selected');\r\n");
      out.write("\r\n");
      out.write("		});\r\n");
      out.write("\r\n");
      out.write("		checkSeat();\r\n");
      out.write("\r\n");
      out.write("	}\r\n");
      out.write("\r\n");
      out.write("	function countSeatsByStatus(status) {\r\n");
      out.write("		return $('.seat.' + status).length; // 해당 상태 클래스가 적용된 좌석의 개수 반환\r\n");
      out.write("	}\r\n");
      out.write("\r\n");
      out.write("	function checkSeat() {\r\n");
      out.write("		var totalSeatCount = countSeatsByStatus('seat'); // 사용 가능한 좌석 개수\r\n");
      out.write("		var availableSeatCount = countSeatsByStatus('available'); // 사용 가능한 좌석 개수\r\n");
      out.write("		var unavailableSeatCount = countSeatsByStatus('unavailable'); // 사용 불가능한 좌석 개수\r\n");
      out.write("\r\n");
      out.write("		// 선택 가능한 좌석 수와 선택 불가능한 좌석 수를 HTML에 적용\r\n");
      out.write("		$('#totalSeat').text('총좌석 : ' + totalSeatCount + '석');\r\n");
      out.write("		$('#availableSeat').text('선택가능 : ' + availableSeatCount + '석');\r\n");
      out.write("		$('#unavailableSeat').text('선택불가능 : ' + unavailableSeatCount + '석');\r\n");
      out.write("\r\n");
      out.write("	}\r\n");
      out.write("\r\n");
      out.write("	function saveSeat() {//좌석상태 저장메서드\r\n");
      out.write("\r\n");
      out.write("		// 선택된 좌석의 개수 확인\r\n");
      out.write("		var selectedSeats = $('.seat.selected');\r\n");
      out.write("		var theaterName = document.getElementById(\"name\").value\r\n");
      out.write("		var theaterNumber = document.getElementById(\"number\").value\r\n");
      out.write("		var setSeatStatus = document.querySelector(\"select[name='status']\").value\r\n");
      out.write("		var selectedSeatStatus = '';\r\n");
      out.write("\r\n");
      out.write("		// 선택된 좌석이 없는 경우 알림창 띄우기\r\n");
      out.write("		if (selectedSeats.length === 0) {\r\n");
      out.write("			alert('좌석을 선택해주세요.');\r\n");
      out.write("		} else {\r\n");
      out.write("			// 선택된 좌석이 있는 경우\r\n");
      out.write("			var seatInfo = '';\r\n");
      out.write("			// 선택된 좌석의 정보를 문자열에 추가\r\n");
      out.write("			selectedSeats.each(function(index) {\r\n");
      out.write("				seatInfo = $(this).text();\r\n");
      out.write("				// 선택된 좌석의 상태를 확인하여 selectedSeatStatus 변수에 할당\r\n");
      out.write("				if ($(this).hasClass('unavailable')) {\r\n");
      out.write("					selectedSeatStatus = \"N\";\r\n");
      out.write("				} else if ($(this).hasClass('available')) {\r\n");
      out.write("					selectedSeatStatus = \"Y\";\r\n");
      out.write("				}\r\n");
      out.write("			});\r\n");
      out.write("			// 선택된 좌석 정보를 알림창으로 출력\r\n");
      out.write("			alert('영화관명 : ' + theaterName + '\\n' + '영화관 : ' + theaterNumber\r\n");
      out.write("					+ '\\n' + '선택된 좌석 : ' + seatInfo + '\\n' + '선택된 좌석의 상태 : '\r\n");
      out.write("					+ selectedSeatStatus + '\\n' + '바꿀 좌석 상태 : ' + setSeatStatus);\r\n");
      out.write("\r\n");
      out.write("			// 선택된 좌석의 상태와 적용할 좌석 상태가 동일한지 확인\r\n");
      out.write("			if (selectedSeatStatus === setSeatStatus) {\r\n");
      out.write("				alert(\"적용되어있는 좌석의 상태와 적용할 좌석 상태가 동일합니다.\");\r\n");
      out.write("				return;\r\n");
      out.write("			}\r\n");
      out.write("\r\n");
      out.write("			\r\n");
      out.write("			var request = new XMLHttpRequest(); // request 변수를 선언\r\n");
      out.write("\r\n");
      out.write("			request\r\n");
      out.write("					.open(\r\n");
      out.write("							\"POST\",\r\n");
      out.write("							\"http://localhost/theater_prj/UpdateSeatStatusServlet\",\r\n");
      out.write("							true);\r\n");
      out.write("			request.setRequestHeader(\"Content-Type\",\r\n");
      out.write("					\"application/x-www-form-urlencoded; charset=UTF-8\");\r\n");
      out.write("\r\n");
      out.write("			// 에러 핸들링\r\n");
      out.write("			request.onerror = function() {\r\n");
      out.write("				alert(\"요청을 보낼 때 오류가 발생했습니다.\");\r\n");
      out.write("			};\r\n");
      out.write("\r\n");
      out.write("			request.onreadystatechange = function() {\r\n");
      out.write("				if (request.readyState == 4) {\r\n");
      out.write("					if (request.status == 200) {\r\n");
      out.write("						// 응답을 받으면 처리\r\n");
      out.write("						alert(\"성공적으로 상태가 변경되었습니다.\");\r\n");
      out.write("						searchTheaterSeat();\r\n");
      out.write("					} else {\r\n");
      out.write("						alert(\"문제가 발생했습니다.\");\r\n");
      out.write("					}\r\n");
      out.write("				}\r\n");
      out.write("			};\r\n");
      out.write("\r\n");
      out.write("			// POST 요청의 파라미터를 설정하여 보냄\r\n");
      out.write("			request.send(\"theaterName=\" + encodeURIComponent(theaterName)\r\n");
      out.write("					+ \"&theaterNumber=\" + encodeURIComponent(theaterNumber)\r\n");
      out.write("					+ \"&seatInfo=\" + encodeURIComponent(seatInfo)\r\n");
      out.write("					+ \"&setSeatStatus=\" + encodeURIComponent(setSeatStatus));\r\n");
      out.write("\r\n");
      out.write("			\r\n");
      out.write("\r\n");
      out.write("		}//checkSeat();\r\n");
      out.write("\r\n");
      out.write("	}//saveSeat\r\n");
      out.write("</script>\r\n");
      out.write("</head>\r\n");
      out.write("<body id=\"page-top\">\r\n");
      out.write("	<!-- S 로그인 세션 확인  -->\r\n");
      out.write("	");

	// 세션에서 로그인 여부 확인
	String id = (String) session.getAttribute("adminId");
	if (id == null) {// 로그인되지 않은 경우 로그인 페이지로 리디렉션
	
      out.write("\r\n");
      out.write("	<script type=\"text/javascript\">\r\n");
      out.write("    window.location.href = \"login.jsp?prevPage=theater.jsp\";\r\n");
      out.write("    </script>\r\n");
      out.write("	");

	}
	
      out.write("\r\n");
      out.write("	<!-- E 로그인 세션 확인  -->\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("	");

	TheaterDAO tDAO = TheaterDAO.getInstance(); //DAO호출

	List<TheaterVO> tVONameList = tDAO.selectTheaterName();//상영관지점명이 담긴 리스트 

	String theaterName = tVONameList.get(0).getTheaterName();//첫번째옵션의 상영관지점명

	List<TheaterVO> tVONumList = tDAO.selectTheaterNum(theaterName); //첫번째옵션의 상영관지점명에 대한 상영관 리스트
	
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("	<!-- Page Wrapper -->\r\n");
      out.write("	<div id=\"wrapper\">\r\n");
      out.write("		");
      out.write('\r');
      out.write('\n');

	String sbid = (String)session.getAttribute("adminId");

      out.write("\r\n");
      out.write("        <!-- Sidebar -->\r\n");
      out.write("        <ul class=\"navbar-nav bg-gradient-primary sidebar sidebar-dark accordion\" id=\"accordionSidebar\">\r\n");
      out.write("\r\n");
      out.write("            <!-- Sidebar - Brand -->\r\n");
      out.write("            <a class=\"sidebar-brand d-flex align-items-center justify-content-center\" href=\"http://localhost/theater_prj/asd/admin/jsp/dashboard.jsp\">\r\n");
      out.write("                <div class=\"sidebar-brand-icon rotate-n-15\">\r\n");
      out.write("                    <i class=\"fas fa-laugh-wink\"></i>\r\n");
      out.write("                </div>\r\n");
      out.write("                <div class=\"sidebar-brand-text mx-3\"><span>");
      out.print(sbid);
      out.write("</span>님</div>\r\n");
      out.write("                <div class=\"sidebar-brand-text mx-3\">로그인 중</div>\r\n");
      out.write("            </a>\r\n");
      out.write("\r\n");
      out.write("            <!-- Divider -->\r\n");
      out.write("            <hr class=\"sidebar-divider my-0\">\r\n");
      out.write("\r\n");
      out.write("            <!-- Nav Item - Dashboard -->\r\n");
      out.write("            <li class=\"nav-item\">\r\n");
      out.write("                <a class=\"nav-link\" href=\"http://localhost/theater_prj/asd/admin/jsp/dashboard.jsp\">\r\n");
      out.write("                    <i class=\"fas fa-fw fa-tachometer-alt\"></i>\r\n");
      out.write("                    <span>대시보드</span></a>\r\n");
      out.write("            </li>\r\n");
      out.write("            <li class=\"nav-item\">\r\n");
      out.write("                <a class=\"nav-link\" href=\"http://localhost/theater_prj/asd/admin/jsp/movie.jsp\">\r\n");
      out.write("                    <i class=\"fas fa-fw fa-table\"></i>\r\n");
      out.write("                    <span>영화관리</span></a>\r\n");
      out.write("            </li>\r\n");
      out.write("            \r\n");
      out.write("            <!-- Nav Item - 상영관리 -->\r\n");
      out.write("            <li class=\"nav-item\">\r\n");
      out.write("                <a class=\"nav-link\" href=\"http://localhost/theater_prj/asd/admin/jsp/screening.jsp\">\r\n");
      out.write("                    <i class=\"fas fa-fw fa-table\"></i>\r\n");
      out.write("                    <span>상영 관리</span></a>\r\n");
      out.write("            </li>\r\n");
      out.write("            \r\n");
      out.write("            <!-- Nav Item - 상영관관리 -->\r\n");
      out.write("            <li class=\"nav-item\">\r\n");
      out.write("                <a class=\"nav-link\" href=\"http://localhost/theater_prj/asd/admin/jsp/theater.jsp\">\r\n");
      out.write("                    <i class=\"fas fa-fw fa-table\"></i>\r\n");
      out.write("                    <span>상영관 관리</span></a>\r\n");
      out.write("            </li>\r\n");
      out.write("            \r\n");
      out.write("            <!-- Nav Item - 회원관리 -->\r\n");
      out.write("            <li class=\"nav-item\">\r\n");
      out.write("                <a class=\"nav-link\" href=\"http://localhost/theater_prj/asd/admin/jsp/member.jsp\">\r\n");
      out.write("                    <i class=\"fas fa-fw fa-table\"></i>\r\n");
      out.write("                    <span>회원 관리</span></a>\r\n");
      out.write("            </li>\r\n");
      out.write("            \r\n");
      out.write("            <!-- Nav Item - 예매관리 -->\r\n");
      out.write("            <li class=\"nav-item\">\r\n");
      out.write("                <a class=\"nav-link\" href=\"http://localhost/theater_prj/asd/admin/jsp/reservation.jsp\">\r\n");
      out.write("                    <i class=\"fas fa-fw fa-table\"></i>\r\n");
      out.write("                    <span>예매 관리</span></a>\r\n");
      out.write("            </li>\r\n");
      out.write("\r\n");
      out.write("            <!-- Nav Item - 공지사항관리 -->\r\n");
      out.write("            <li class=\"nav-item\">\r\n");
      out.write("                <a class=\"nav-link\" href=\"http://localhost/theater_prj/asd/admin/jsp/notice.jsp\">\r\n");
      out.write("                    <i class=\"fas fa-fw fa-table\"></i>\r\n");
      out.write("                    <span>공지사항 관리</span></a>\r\n");
      out.write("            </li>\r\n");
      out.write("            \r\n");
      out.write("            <!-- Nav Item - 자주찾는질문 -->\r\n");
      out.write("            <li class=\"nav-item\">\r\n");
      out.write("                <a class=\"nav-link\" href=\"http://localhost/theater_prj/asd/admin/jsp/question.jsp\">\r\n");
      out.write("                    <i class=\"fas fa-fw fa-table\"></i>\r\n");
      out.write("                    <span>자주찾는질문</span></a>\r\n");
      out.write("            </li>\r\n");
      out.write("\r\n");
      out.write("            <!-- Divider -->\r\n");
      out.write("            <hr class=\"sidebar-divider d-none d-md-block\">\r\n");
      out.write("\r\n");
      out.write("            <!-- Sidebar Toggler (Sidebar) -->\r\n");
      out.write("            <div class=\"text-center d-none d-md-inline\">\r\n");
      out.write("                <button class=\"rounded-circle border-0\" id=\"sidebarToggle\"></button>\r\n");
      out.write("            </div>\r\n");
      out.write("\r\n");
      out.write("        </ul>\r\n");
      out.write("        <!-- End of Sidebar -->");
      out.write("\r\n");
      out.write("		<!-- Content Wrapper -->\r\n");
      out.write("		<div id=\"content-wrapper\" class=\"d-flex flex-column\">\r\n");
      out.write("			<!-- Main Content -->\r\n");
      out.write("			<div id=\"content\">\r\n");
      out.write("				");
      out.write('\r');
      out.write('\n');

	String tbid = (String)session.getAttribute("adminId");

      out.write("\r\n");
      out.write("<!-- Topbar -->\r\n");
      out.write("       <nav class=\"navbar navbar-expand navbar-light bg-white topbar mb-4 static-top shadow\">\r\n");
      out.write("\r\n");
      out.write("           <!-- Sidebar Toggle (Topbar) -->\r\n");
      out.write("           <button id=\"sidebarToggleTop\" class=\"btn btn-link d-md-none rounded-circle mr-3\">\r\n");
      out.write("               <i class=\"fa fa-bars\"></i>\r\n");
      out.write("           </button>\r\n");
      out.write("\r\n");
      out.write("           <!-- Topbar Navbar -->\r\n");
      out.write("           <ul class=\"navbar-nav ml-auto\">\r\n");
      out.write("\r\n");
      out.write("               <!-- Nav Item - Search Dropdown (Visible Only XS) -->\r\n");
      out.write("               <li class=\"nav-item dropdown no-arrow d-sm-none\">\r\n");
      out.write("                   <a class=\"nav-link dropdown-toggle\" href=\"#\" id=\"searchDropdown\" role=\"button\"\r\n");
      out.write("                       data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n");
      out.write("                       <i class=\"fas fa-search fa-fw\"></i>\r\n");
      out.write("                   </a>\r\n");
      out.write("                   <!-- Dropdown - Messages -->\r\n");
      out.write("                   <div class=\"dropdown-menu dropdown-menu-right p-3 shadow animated--grow-in\"\r\n");
      out.write("                       aria-labelledby=\"searchDropdown\">\r\n");
      out.write("                       <form class=\"form-inline mr-auto w-100 navbar-search\">\r\n");
      out.write("                           <div class=\"input-group\">\r\n");
      out.write("                               <input type=\"text\" class=\"form-control bg-light border-0 small\"\r\n");
      out.write("                                   placeholder=\"Search for...\" aria-label=\"Search\"\r\n");
      out.write("                                   aria-describedby=\"basic-addon2\">\r\n");
      out.write("                               <div class=\"input-group-append\">\r\n");
      out.write("                                   <button class=\"btn btn-primary\" type=\"button\">\r\n");
      out.write("                                       <i class=\"fas fa-search fa-sm\"></i>\r\n");
      out.write("                                   </button>\r\n");
      out.write("                               </div>\r\n");
      out.write("                           </div>\r\n");
      out.write("                       </form>\r\n");
      out.write("                   </div>\r\n");
      out.write("               </li>\r\n");
      out.write("\r\n");
      out.write("               \r\n");
      out.write("\r\n");
      out.write("               <div class=\"topbar-divider d-none d-sm-block\"></div>\r\n");
      out.write("\r\n");
      out.write("               <!-- Nav Item - User Information -->\r\n");
      out.write("               <li class=\"nav-item dropdown no-arrow\">\r\n");
      out.write("                   <a class=\"nav-link dropdown-toggle\" href=\"#\" id=\"userDropdown\" role=\"button\"\r\n");
      out.write("                       data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n");
      out.write("                       \r\n");
      out.write("                       <span class=\"mr-2 d-none d-lg-inline text-gray-600 small\">");
      out.print(tbid);
      out.write("</span>\r\n");
      out.write("                       <img class=\"img-profile rounded-circle\"\r\n");
      out.write("                           src=\"http://localhost/theater_prj/asd/admin/img/undraw_profile.svg\">\r\n");
      out.write("                   </a>\r\n");
      out.write("                   <!-- Dropdown - User Information -->\r\n");
      out.write("                   <div class=\"dropdown-menu dropdown-menu-right shadow animated--grow-in\"\r\n");
      out.write("                       aria-labelledby=\"userDropdown\">\r\n");
      out.write("                       <a class=\"dropdown-item\" href=\"#\" data-toggle=\"modal\" data-target=\"#logoutModal\">\r\n");
      out.write("                           <i class=\"fas fa-sign-out-alt fa-sm fa-fw mr-2 text-gray-400\"></i>\r\n");
      out.write("                           Logout\r\n");
      out.write("                       </a>\r\n");
      out.write("                   </div>\r\n");
      out.write("               </li>\r\n");
      out.write("\r\n");
      out.write("           </ul>\r\n");
      out.write("\r\n");
      out.write("       </nav>\r\n");
      out.write("<!-- End of Topbar -->\r\n");
      out.write("\r\n");
      out.write("<!-- Logout Modal-->\r\n");
      out.write("    <div class=\"modal fade\" id=\"logoutModal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalLabel\"\r\n");
      out.write("        aria-hidden=\"true\">\r\n");
      out.write("        <div class=\"modal-dialog\" role=\"document\">\r\n");
      out.write("            <div class=\"modal-content\">\r\n");
      out.write("                <div class=\"modal-header\">\r\n");
      out.write("                    <h5 class=\"modal-title\" id=\"exampleModalLabel\">로그아웃하시겠습니까?</h5>\r\n");
      out.write("                    <button class=\"close\" type=\"button\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n");
      out.write("                        <span aria-hidden=\"true\">×</span>\r\n");
      out.write("                    </button>\r\n");
      out.write("                </div>\r\n");
      out.write("                <div class=\"modal-body\">\"Logout\" 버튼을 누르면 로그아웃됩니다.</div>\r\n");
      out.write("                <div class=\"modal-footer\">\r\n");
      out.write("                    <a class=\"btn btn-primary\" href=\"logout.jsp\">Logout</a>\r\n");
      out.write("                    <button class=\"btn btn-secondary\" type=\"button\" data-dismiss=\"modal\">Cancel</button>\r\n");
      out.write("                </div>\r\n");
      out.write("            </div>\r\n");
      out.write("        </div>\r\n");
      out.write("    </div>");
      out.write("\r\n");
      out.write("				<!-- Begin Page Content -->\r\n");
      out.write("				<div class=\"container-fluid\">\r\n");
      out.write("					<!-- Page Heading -->\r\n");
      out.write("					<div\r\n");
      out.write("						class=\"d-sm-flex align-items-center justify-content-between mb-4\">\r\n");
      out.write("						<h1 class=\"h3 mb-0 text-gray-800\">상영관관리</h1>\r\n");
      out.write("					</div>\r\n");
      out.write("				</div>\r\n");
      out.write("				<!-- /.container-fluid -->\r\n");
      out.write("				<form>\r\n");
      out.write("					<div class=\"row\">\r\n");
      out.write("						<div class=\"section\" id=\"section1\">\r\n");
      out.write("							<select name=\"theaterName\" id=\"theaterName\">\r\n");
      out.write("								");

								for (TheaterVO theater : tVONameList) {
								
      out.write("\r\n");
      out.write("								<option value=\"");
      out.print(theater.getTheaterName());
      out.write('"');
      out.write('>');
      out.print(theater.getTheaterName());
      out.write("</option>\r\n");
      out.write("								");

								}
								
      out.write("\r\n");
      out.write("							</select> <select name=\"theaterNum\" id=\"theaterNum\">\r\n");
      out.write("								");

								for (TheaterVO theater : tVONumList) {
								
      out.write("\r\n");
      out.write("								<option value=\"");
      out.print(theater.getTheaterNumber());
      out.write('"');
      out.write('>');
      out.print(theater.getTheaterNumber());
      out.write("</option>\r\n");
      out.write("								");

								}
								
      out.write("\r\n");
      out.write("							</select>\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("							<button type=\"button\" name=\"search\"\r\n");
      out.write("								class=\"btn btn-secondary btn-sm\" onclick=\"searchTheaterSeat()\">검색</button>\r\n");
      out.write("\r\n");
      out.write("							<div class=\"selectedTheather\" id='selectedTheather'></div>\r\n");
      out.write("						</div>\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("						<div class=\"section\" id=\"section2\">\r\n");
      out.write("							<select name=\"status\" style=\"width: 90px\">\r\n");
      out.write("								<option value=\"Y\">선택가능</option>\r\n");
      out.write("								<option value=\"N\">선택불가</option>\r\n");
      out.write("							</select>\r\n");
      out.write("							<button type=\"button\" name=\"setOption\"\r\n");
      out.write("								class=\"btn btn-secondary btn-sm\" onclick=\"saveSeat()\">저장</button>\r\n");
      out.write("						</div>\r\n");
      out.write("					</div>\r\n");
      out.write("\r\n");
      out.write("					<div class=\"theater\">\r\n");
      out.write("						<div class=\"screen-container\">\r\n");
      out.write("\r\n");
      out.write("							<div class=\"screen\">SCREEN</div>\r\n");
      out.write("						</div>\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("						<div class=\"empty-container\" style=\"justify-content: flex-end;\">\r\n");
      out.write("							<div class=\"viewSeat\"\r\n");
      out.write("								style=\"border: 1px solid black; padding: 10px;\">\r\n");
      out.write("								<div style=\"margin-top: 10px;\">\r\n");
      out.write("									<span id=\"totalSeat\">총좌석 : 석</span><br>\r\n");
      out.write("									<div style=\"display: flex; align-items: center;\">\r\n");
      out.write("										<div\r\n");
      out.write("											style=\"width: 20px; height: 20px; background-color: red; border: 1px solid black; margin-right: 5px;\"></div>\r\n");
      out.write("										<span style=\"font-size: 16px;\">선택좌석</span>\r\n");
      out.write("									</div>\r\n");
      out.write("									<div style=\"display: flex; align-items: center;\">\r\n");
      out.write("										<div\r\n");
      out.write("											style=\"width: 20px; height: 20px; background-color: white; border: 1px solid black; margin-right: 5px;\"></div>\r\n");
      out.write("										<span id=\"availableSeat\" style=\"font-size: 16px;\">선택가능\r\n");
      out.write("											: 석</span>\r\n");
      out.write("									</div>\r\n");
      out.write("									<div\r\n");
      out.write("										style=\"display: flex; align-items: center; margin-top: 5px;\">\r\n");
      out.write("										<div\r\n");
      out.write("											style=\"width: 20px; height: 20px; background-color: gray; border: 1px solid black; margin-right: 5px;\"></div>\r\n");
      out.write("										<span id=\"unavailableSeat\" style=\"font-size: 16px;\">선택불가능\r\n");
      out.write("											: 석</span>\r\n");
      out.write("									</div>\r\n");
      out.write("								</div>\r\n");
      out.write("							</div>\r\n");
      out.write("						</div>\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("						<div class=\"seat-container\"></div>\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("						<input type=\"hidden\" id=\"name\" value=\"\" /> <input type=\"hidden\"\r\n");
      out.write("							id=\"number\" value=\"\" />\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("					</div>\r\n");
      out.write("				</form>\r\n");
      out.write("			</div>\r\n");
      out.write("\r\n");
      out.write("			<!-- End of Main Content -->\r\n");
      out.write("			");
      out.write("\r\n");
      out.write("\r\n");
      out.write("            <!-- Footer -->\r\n");
      out.write("            <footer class=\"sticky-footer bg-white\">\r\n");
      out.write("                <div class=\"container my-auto\">\r\n");
      out.write("                    <div class=\"copyright text-center my-auto\">\r\n");
      out.write("                        <span>Copyright &copy; SAVE ME 2024</span>\r\n");
      out.write("                    </div>\r\n");
      out.write("                </div>\r\n");
      out.write("            </footer>\r\n");
      out.write("            <!-- End of Footer -->\r\n");
      out.write("\r\n");
      out.write("    <!-- Scroll to Top Button-->\r\n");
      out.write("    <a class=\"scroll-to-top rounded\" href=\"#page-top\">\r\n");
      out.write("        <i class=\"fas fa-angle-up\"></i>\r\n");
      out.write("    </a>");
      out.write("\r\n");
      out.write("		</div>\r\n");
      out.write("		<!-- End of Content Wrapper -->\r\n");
      out.write("	</div>\r\n");
      out.write("	<!-- End of Page Wrapper -->\r\n");
      out.write("	<!-- Bootstrap core JavaScript-->\r\n");
      out.write("	<script src=\"../vendor/jquery/jquery.js\"></script>\r\n");
      out.write("	<script src=\"../vendor/bootstrap/js/bootstrap.bundle.js\"></script>\r\n");
      out.write("	<!-- Core plugin JavaScript-->\r\n");
      out.write("	<script src=\"../vendor/jquery-easing/jquery.easing.js\"></script>\r\n");
      out.write("	<!-- Custom scripts for all pages-->\r\n");
      out.write("	<script src=\"../js/sb-admin-2.min.js\"></script>\r\n");
      out.write("</body>\r\n");
      out.write("</html>");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try {
            if (response.isCommitted()) {
              out.flush();
            } else {
              out.clearBuffer();
            }
          } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
