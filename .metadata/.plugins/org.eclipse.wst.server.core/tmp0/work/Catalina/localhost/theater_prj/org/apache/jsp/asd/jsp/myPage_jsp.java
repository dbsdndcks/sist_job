/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: Apache Tomcat/9.0.86
 * Generated at: 2024-06-22 12:15:41 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp.asd.jsp;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;
import javax.naming.Context;

public final class myPage_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent,
                 org.apache.jasper.runtime.JspSourceImports {

  public java.lang.String getServletInfo() {
    return "마이페이지";
  }

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  private static final java.util.Set<java.lang.String> _jspx_imports_packages;

  private static final java.util.Set<java.lang.String> _jspx_imports_classes;

  static {
    _jspx_imports_packages = new java.util.LinkedHashSet<>(3);
    _jspx_imports_packages.add("javax.servlet");
    _jspx_imports_packages.add("javax.servlet.http");
    _jspx_imports_packages.add("javax.servlet.jsp");
    _jspx_imports_classes = new java.util.LinkedHashSet<>(1);
    _jspx_imports_classes.add("javax.naming.Context");
  }

  private volatile javax.el.ExpressionFactory _el_expressionfactory;
  private volatile org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public java.util.Set<java.lang.String> getPackageImports() {
    return _jspx_imports_packages;
  }

  public java.util.Set<java.lang.String> getClassImports() {
    return _jspx_imports_classes;
  }

  public javax.el.ExpressionFactory _jsp_getExpressionFactory() {
    if (_el_expressionfactory == null) {
      synchronized (this) {
        if (_el_expressionfactory == null) {
          _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
        }
      }
    }
    return _el_expressionfactory;
  }

  public org.apache.tomcat.InstanceManager _jsp_getInstanceManager() {
    if (_jsp_instancemanager == null) {
      synchronized (this) {
        if (_jsp_instancemanager == null) {
          _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
        }
      }
    }
    return _jsp_instancemanager;
  }

  public void _jspInit() {
  }

  public void _jspDestroy() {
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
      throws java.io.IOException, javax.servlet.ServletException {

    if (!javax.servlet.DispatcherType.ERROR.equals(request.getDispatcherType())) {
      final java.lang.String _jspx_method = request.getMethod();
      if ("OPTIONS".equals(_jspx_method)) {
        response.setHeader("Allow","GET, HEAD, POST, OPTIONS");
        return;
      }
      if (!"GET".equals(_jspx_method) && !"POST".equals(_jspx_method) && !"HEAD".equals(_jspx_method)) {
        response.setHeader("Allow","GET, HEAD, POST, OPTIONS");
        response.sendError(HttpServletResponse.SC_METHOD_NOT_ALLOWED, "JSP들은 오직 GET, POST 또는 HEAD 메소드만을 허용합니다. Jasper는 OPTIONS 메소드 또한 허용합니다.");
        return;
      }
    }

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html; charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("<!DOCTYPE html>\r\n");
      out.write("<html>\r\n");
      out.write("<head>\r\n");
      out.write("\r\n");
      out.write("<link rel=\"icon\" href=\"http://192.168.10.227/common/favicon.ico\" />\r\n");
      out.write("<!--bootstrap 시작-->\r\n");
      out.write("<link\r\n");
      out.write("	href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\"\r\n");
      out.write("	rel=\"stylesheet\"\r\n");
      out.write("	integrity=\"sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\"\r\n");
      out.write("	crossorigin=\"anonymous\">\r\n");
      out.write("<script\r\n");
      out.write("	src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"\r\n");
      out.write("	integrity=\"sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz\"\r\n");
      out.write("	crossorigin=\"anonymous\"></script>\r\n");
      out.write("<!--bootstrap 끝-->\r\n");
      out.write("<link rel=\"stylesheet\"\r\n");
      out.write("	href=\"http://192.168.10.227/common/css/main.css\">\r\n");
      out.write("<link rel=\"stylesheet\"\r\n");
      out.write("	href=\"http://192.168.10.227/common/css/board.css\">\r\n");
      out.write("<!--jQeury CDN 시작-->\r\n");
      out.write("<script\r\n");
      out.write("	src=\"https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js\"></script>\r\n");
      out.write("<!--jQeury CDN 끝-->\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("<link rel=\"alternate\" href=\"http://m.cgv.co.kr\" />\r\n");
      out.write("<link rel=\"shortcut icon\" href=\"../favicon.ico\" type=\"image/x-icon\" />\r\n");
      out.write("<title id=\"ctl00_headerTitle\">마이페이지 | 명화 그 이상의 감동. 띵화관</title>\r\n");
      out.write("\r\n");
      out.write("<link rel=\"shortcut icon\" type=\"image/x-icon\"\r\n");
      out.write("	href=\"https://img.cgv.co.kr/R2014/images/favicon.ico\" />\r\n");
      out.write("<link rel=\"stylesheet\" media=\"all\" type=\"text/css\"\r\n");
      out.write("	href=\"https://img.cgv.co.kr/R2014/css/webfont.css\" />\r\n");
      out.write("<link rel=\"stylesheet\" media=\"all\" type=\"text/css\"\r\n");
      out.write("	href=\"https://img.cgv.co.kr/R2014/css/reset.css\" />\r\n");
      out.write("<link rel=\"stylesheet\" media=\"all\" type=\"text/css\"\r\n");
      out.write("	href=\"../css/layout.css\" />\r\n");
      out.write("<link rel=\"stylesheet\" media=\"all\" type=\"text/css\"\r\n");
      out.write("	href=\"../css/module.css\" />\r\n");
      out.write("<link rel=\"stylesheet\" media=\"all\" type=\"text/css\"\r\n");
      out.write("	href=\"../css/content.css\" />\r\n");
      out.write("<link rel=\"stylesheet\" media=\"all\" type=\"text/css\"\r\n");
      out.write("	href=\"https://img.cgv.co.kr/R2014/css/common.css\" />\r\n");
      out.write("\r\n");
      out.write("<link rel=\"stylesheet\" media=\"all\" type=\"text/css\"\r\n");
      out.write("	href=\"https://img.cgv.co.kr/R2014/css/eggupdate.css\" />\r\n");
      out.write("<link rel=\"stylesheet\" media=\"print\" type=\"text/css\"\r\n");
      out.write("	href=\"https://img.cgv.co.kr/R2014/css/print.css\" />\r\n");
      out.write("<link rel=\"stylesheet\" type=\"text/css\"\r\n");
      out.write("	href=\"https://img.cgv.co.kr/R2014/js/jquery.ui/smoothness/jquery-ui-1.10.4.custom.min.css\" />\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("<script type=\"text/javascript\"\r\n");
      out.write("	src=\"https://img.cgv.co.kr/R2014/js/jquery-1.10.2.min.js\"></script>\r\n");
      out.write("<script type=\"text/javascript\"\r\n");
      out.write("	src=\"https://img.cgv.co.kr/R2014/js/jquery.plugin/jquery.tmpl.min.js\"></script>\r\n");
      out.write("<script type=\"text/javascript\"\r\n");
      out.write("	src=\"https://img.cgv.co.kr/R2014/js/jquery.plugin/jquery.validate.js\"></script>\r\n");
      out.write("<script type=\"text/javascript\"\r\n");
      out.write("	src=\"https://img.cgv.co.kr/R2014/js/jquery.plugin/jquery.paging.min.js\"></script>\r\n");
      out.write("<script type=\"text/javascript\"\r\n");
      out.write("	src=\"https://img.cgv.co.kr/R2014/js/jquery.ui/jquery-ui-1.10.4.custom.min.js\"></script>\r\n");
      out.write("<script type=\"text/javascript\"\r\n");
      out.write("	src=\"https://img.cgv.co.kr/R2014/js/jquery.utils.js\"></script>\r\n");
      out.write("\r\n");
      out.write("<script type=\"text/javascript\"\r\n");
      out.write("	src=\"https://img.cgv.co.kr/R2014/js/jquery.utils.pageing.js\"></script>\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("<script type=\"text/javascript\"\r\n");
      out.write("	src=\"https://img.cgv.co.kr/R2014/js/jquery.plugin/jquery.dotdotdot.min.js\"></script>\r\n");
      out.write("<script type=\"text/javascript\"\r\n");
      out.write("	src=\"https://img.cgv.co.kr/R2014/js/silverlight_link.js\"></script>\r\n");
      out.write("<script src=\"https://img.cgv.co.kr/R2014/js/slick/slick.js\"\r\n");
      out.write("	type=\"text/javascript\" charset=\"utf-8\"></script>\r\n");
      out.write("\r\n");
      out.write("<link rel=\"stylesheet\" media=\"all\" type=\"text/css\"\r\n");
      out.write("	href=\"https://img.cgv.co.kr/R2014/css/phototicket/phototicket.css\" />\r\n");
      out.write("<link rel=\"stylesheet\" media=\"all\" type=\"text/css\"\r\n");
      out.write("	href=\"https://img.cgv.co.kr/R2014/css/slick.css\" />\r\n");
      out.write("<link rel=\"stylesheet\" media=\"all\" type=\"text/css\"\r\n");
      out.write("	href=\"https://img.cgv.co.kr/R2014/css/slick-theme-custom.css\" />\r\n");
      out.write("\r\n");
      out.write("<script type=\"text/javascript\"\r\n");
      out.write("	src=\"https://img.cgv.co.kr/R2014/js/icheck/login.timer.js\"></script>\r\n");
      out.write("<script src=\"https://img.cgv.co.kr/R2014/js/icheck/icheck.min.js\"\r\n");
      out.write("	type=\"text/javascript\" charset=\"utf-8\"></script>\r\n");
      out.write("<link rel=\"stylesheet\" type=\"text/css\"\r\n");
      out.write("	href=\"https://img.cgv.co.kr/R2014/js/icheck/iCheck.css\" />\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("<!-- 홈페이지 CSS 일원화로 인한 반영 20220721 -->\r\n");
      out.write("<link rel=\"stylesheet\" type=\"text/css\"\r\n");
      out.write("	href=\"https://img.cgv.co.kr/resource_pc/css/cgv.min.css\" />\r\n");
      out.write("<script type=\"text/javascript\"\r\n");
      out.write("	src=\"https://img.cgv.co.kr/resource_pc/js/cgvUi.js\"></script>\r\n");
      out.write("\r\n");
      out.write("<!-- 각페이지 Header Start-->\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("<script type=\"text/javascript\"\r\n");
      out.write("	src=\"https://img.cgv.co.kr/R2014/js/swiper.min.js\"></script>\r\n");
      out.write("<link rel=\"stylesheet\" media=\"all\" type=\"text/css\"\r\n");
      out.write("	href=\"https://img.cgv.co.kr/R2014/css/swiper-bundle.min.css\" />\r\n");
      out.write("\r\n");
      out.write("<style type=\"text/css\">\r\n");
      out.write(".left-div {\r\n");
      out.write("	width: 155px;\r\n");
      out.write("	height: 340px;\r\n");
      out.write("	float: left;\r\n");
      out.write("	/* background-color: #eacacb; */\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write(".right-div {\r\n");
      out.write("	width: 629px;\r\n");
      out.write("	height: 340px;\r\n");
      out.write("	float: left;\r\n");
      out.write("	background-color: white;\r\n");
      out.write("	overflow-y: auto;\r\n");
      out.write("	max-height: 500px;\r\n");
      out.write("	/* 	 border: 2px solid #000; */\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write(".user-information-box {\r\n");
      out.write("	width: 629px;\r\n");
      out.write("	height: 100px;\r\n");
      out.write("	margin-top: 100px;\r\n");
      out.write("	display: flex;\r\n");
      out.write("	justify-content: center; /* 가로 중앙 정렬 */\r\n");
      out.write("	align-items: center; /* 세로 중앙 정렬 */\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write("#myPage-ok, #myPage-cancel {\r\n");
      out.write("	width: 150px;\r\n");
      out.write("	height: 30px;\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write(".button-box {\r\n");
      out.write("	margin-left: 150px;\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write(".snb ul li a:hover {\r\n");
      out.write("	cursor: pointer; /* 마우스 호버 시에 커서를 포인터로 변경 */\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write(".password-confirmation {\r\n");
      out.write("	margin-top: 100px;\r\n");
      out.write("	display: flex;\r\n");
      out.write("	justify-content: center; /* 가로 중앙 정렬 */\r\n");
      out.write("	align-items: center; /* 세로 중앙 정렬 */\r\n");
      out.write("}\r\n");
      out.write("</style>\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("<style type=\"text/css\">\r\n");
      out.write(".container2 {\r\n");
      out.write("	width: 629px;\r\n");
      out.write("	height: 340px;\r\n");
      out.write("	border: 2px solid #000;\r\n");
      out.write("	padding-left: 0; /* 왼쪽 여백 제거 */\r\n");
      out.write("	padding-right: 0; /* 오른쪽 여백 제거 */\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write(".top-section {\r\n");
      out.write("	width: 625px;\r\n");
      out.write("	height: 30px;\r\n");
      out.write("	background-color: #ccc; /* 배경색은 회색 */\r\n");
      out.write("	display: flex; /* 가운데 정렬을 위한 Flexbox 사용 */\r\n");
      out.write("	justify-content: center; /* 가로 정렬 가운데로 설정 */\r\n");
      out.write("	align-items: center; /* 세로 정렬 가운데로 설정 */\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write(".top-section div {\r\n");
      out.write("	font-weight: bold; /* 텍스트 진하게 설정 */\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write(".bottom-section {\r\n");
      out.write("	width: 625px;\r\n");
      out.write("	height: 256px;\r\n");
      out.write("	/* background-color: #f0f0f0; */ /* 배경색은 연한 회색 */\r\n");
      out.write("	display: flex; /* 요소들을 가로로 배열하기 위해 Flexbox 사용 */\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write(".buttom-section {\r\n");
      out.write("	width: 625px;\r\n");
      out.write("	height: 50px;\r\n");
      out.write("	/* background-color: #f0f0f0; */ /* 배경색은 연한 회색 */\r\n");
      out.write("	display: flex; /* 요소들을 가로로 배열하기 위해 Flexbox 사용 */\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write(".image-div {\r\n");
      out.write("	margin-top: 20px;\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write(".bottom-section .left-div {\r\n");
      out.write("	width: 150px;\r\n");
      out.write("	height: 256px;\r\n");
      out.write("	/* background-color: #f8d7da; */ /* 첫 번째 div 배경색 */\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write(".bottom-section .middle-div {\r\n");
      out.write("	width: 475px;\r\n");
      out.write("	height: 256px;\r\n");
      out.write("	/* background-color: #d4edda; */ /* 두 번째 div 배경색 */\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write(".buttom-section .bottom-div {\r\n");
      out.write("	width: 625px;\r\n");
      out.write("	height: 50px;\r\n");
      out.write("	/* background-color: #cce5ff; */ /* 세 번째 div 배경색 */\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write(".inner-div {\r\n");
      out.write("	width: 450px;\r\n");
      out.write("	height: 210px;\r\n");
      out.write("	/*  background-color: #D6F793; */  /* 세 번째 div 배경색 */\r\n");
      out.write("	margin-left: 13px;\r\n");
      out.write("	margin-top: 20px;\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write(".dynamic-value {\r\n");
      out.write("	height: 23px; /* 각 동적 값에 대한 높이를 조절할 수 있습니다. */\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write(".dynamic-value p {\r\n");
      out.write("	font-weight: bold; /* 텍스트를 진하게 설정합니다. */\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write(".dynamic-value span {\r\n");
      out.write("	font-weight: normal; /* span 태그의 텍스트를 표준으로 설정합니다. */\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write(".no-review {\r\n");
      out.write("    color: red;\r\n");
      out.write("}\r\n");
      out.write("</style>\r\n");
      out.write("\r\n");
      out.write("<style>\r\n");
      out.write("    .update-container {\r\n");
      out.write("        width: 629px;\r\n");
      out.write("    }\r\n");
      out.write("    .sub-container {\r\n");
      out.write("        width: 100%;\r\n");
      out.write("        display: flex;\r\n");
      out.write("        flex-direction: column;\r\n");
      out.write("    }\r\n");
      out.write("    .sub-container{\r\n");
      out.write("        width: 100%;\r\n");
      out.write("\r\n");
      out.write("    }\r\n");
      out.write("    .reviewInfo {\r\n");
      out.write("        height: 170px;\r\n");
      out.write("        display: flex;\r\n");
      out.write("        flex-direction: row;\r\n");
      out.write("\r\n");
      out.write("        \r\n");
      out.write("    }\r\n");
      out.write("    .reviewContent {\r\n");
      out.write("        height: 120px;\r\n");
      out.write("\r\n");
      out.write("    }\r\n");
      out.write("    .buttonList {\r\n");
      out.write("        height: 50px;\r\n");
      out.write("\r\n");
      out.write("    }\r\n");
      out.write("    .Rating {\r\n");
      out.write("        height: 170px;\r\n");
      out.write("        display: flex;\r\n");
      out.write("        flex-direction: row;\r\n");
      out.write("\r\n");
      out.write("        \r\n");
      out.write("    }\r\n");
      out.write("</style>\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");

String userId = (String) session.getAttribute("id");
pageContext.setAttribute("userId", userId);

      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("<script type=\"text/javascript\">\r\n");
      out.write("$(document).ready(function(){\r\n");
      out.write("    // 각 링크에 대한 클릭 이벤트 리스너 추가\r\n");
      out.write("    $(\".snb ul li a\").click(function(){\r\n");
      out.write("        // 모든 링크의 부모 li 요소에서 'on' 클래스를 제거\r\n");
      out.write("        $(\".snb ul li\").removeClass(\"on\");\r\n");
      out.write("        // 클릭된 링크의 부모 li 요소에 'on' 클래스 추가\r\n");
      out.write("        $(this).parent().addClass(\"on\");\r\n");
      out.write("        // 모든 링크의 배경색과 글자색을 원래대로 되돌리기\r\n");
      out.write("        $(\".snb ul li a\").css({\"background-color\": \"\", \"color\": \"\"});\r\n");
      out.write("        // 클릭된 링크의 배경색과 글자색 변경\r\n");
      out.write("        $(this).css({\"background-color\": \"#fb4357\", \"color\": \"#fdfcf0\"});\r\n");
      out.write("        \r\n");
      out.write("        \r\n");
      out.write("        // 클릭된 메뉴의 텍스트 내용을 가져옴\r\n");
      out.write("        var menuText = $(this).text();\r\n");
      out.write("        // 가져온 메뉴 텍스트를 alert로 표시\r\n");
      out.write("        //alert(\"선택된 메뉴: \" + menuText);\r\n");
      out.write("        \r\n");
      out.write("        \r\n");
      out.write("        \r\n");
      out.write("\r\n");
      out.write("         \r\n");
      out.write("     // 만약 MY 띵화관 HOME 메뉴가 클릭되었다면\r\n");
      out.write("        if(menuText.trim() == \"MY 띵화관\"){\r\n");
      out.write("        	  $(\".right-div\").empty();\r\n");
      out.write("            // MY 띵화관 HOME 내용 추가\r\n");
      out.write("            var userInformationHTML = `\r\n");
      out.write("\r\n");
      out.write("            \r\n");
      out.write("\r\n");
      out.write("            마이페이지에 추가할거 추천받아엽;;;\r\n");
      out.write("            \r\n");
      out.write("            \r\n");
      out.write("            `;\r\n");
      out.write("            $(\".right-div\").html(userInformationHTML);\r\n");
      out.write("        }\r\n");
      out.write("     \r\n");
      out.write("        // 만약 나의 예매내역 메뉴가 클릭되었다면\r\n");
      out.write("        if(menuText.trim() == \"나의 예매내역\"){\r\n");
      out.write("        	  $(\".right-div\").empty();\r\n");
      out.write("\r\n");
      out.write("        	  selectReservation()\r\n");
      out.write("        	  \r\n");
      out.write("        	  \r\n");
      out.write("        }\r\n");
      out.write("        \r\n");
      out.write("        \r\n");
      out.write("        \r\n");
      out.write("        \r\n");
      out.write("        // 만약 내가 본 영화 메뉴가 클릭되었다면\r\n");
      out.write("        if(menuText.trim() == \"내가 본 영화\"){\r\n");
      out.write("        	  $(\".right-div\").empty();\r\n");
      out.write("        	  \r\n");
      out.write("        	  myReview();\r\n");
      out.write("\r\n");
      out.write("        }\r\n");
      out.write("     \r\n");
      out.write("     \r\n");
      out.write("     \r\n");
      out.write("     // 만약 개인 정보 변경 메뉴가 클릭되었다면\r\n");
      out.write("        if (menuText.trim() == \"개인 정보 변경\") {\r\n");
      out.write("            // 기존에 있는 내용을 삭제\r\n");
      out.write("            $(\".right-div\").empty();\r\n");
      out.write("\r\n");
      out.write("            // 비밀번호 확인 폼 추가\r\n");
      out.write("            var passwordFormHTML = `\r\n");
      out.write("            <div class=\"password-confirmation\">\r\n");
      out.write("                <form id=\"passwordConfirmationForm\" class=\"mt-3 row g-3 align-items-center\">\r\n");
      out.write("                    <div class=\"col-auto\">\r\n");
      out.write("                        <label for=\"currentPassword\" class=\"visually-hidden\">현재 비밀번호</label>\r\n");
      out.write("                        <input type=\"password\" id=\"currentPassword\" name=\"currentPassword\" class=\"form-control\" placeholder=\"현재 비밀번호\" required>\r\n");
      out.write("                    </div>\r\n");
      out.write("                    <div class=\"col-auto\">\r\n");
      out.write("                        <button type=\"button\" id=\"checkButton\" class=\"btn btn-success\">확인</button>\r\n");
      out.write("                    </div>\r\n");
      out.write("                </form>\r\n");
      out.write("            </div>`;\r\n");
      out.write("\r\n");
      out.write("            $(\".right-div\").append(passwordFormHTML);\r\n");
      out.write("\r\n");
      out.write("            // input 요소에 이벤트 리스너를 추가하여 엔터 키 이벤트를 감지합니다.\r\n");
      out.write("            document.getElementById(\"currentPassword\").addEventListener(\"keypress\", handleKeyPress);\r\n");
      out.write("\r\n");
      out.write("            // 비밀번호 확인 폼 제출 이벤트 처리\r\n");
      out.write("            $(\"#checkButton\").click(function(event) {\r\n");
      out.write("                event.preventDefault(); // 기본 동작 중단\r\n");
      out.write("                checkNull();\r\n");
      out.write("            });\r\n");
      out.write("        } //end if\r\n");
      out.write("     \r\n");
      out.write("     \r\n");
      out.write("     \r\n");
      out.write("     \r\n");
      out.write("    });\r\n");
      out.write("         \r\n");
      out.write("         \r\n");
      out.write(" \r\n");
      out.write("\r\n");
      out.write("    \r\n");
      out.write("    \r\n");
      out.write("\r\n");
      out.write("    \r\n");
      out.write("    \r\n");
      out.write("    \r\n");
      out.write(" // 비밀번호 변경 버튼 클릭 이벤트 리스너 추가\r\n");
      out.write("    $(\"#changePasswordButton\").click(function() {\r\n");
      out.write("        // 비밀번호 변경 다이얼로그 열기\r\n");
      out.write("        $(\"#changePasswordDialog\").dialog(\"open\");\r\n");
      out.write("    });\r\n");
      out.write("    \r\n");
      out.write("    // jQuery UI 다이얼로그 초기화\r\n");
      out.write("    $(\"#changePasswordDialog\").dialog({\r\n");
      out.write("        autoOpen: false, // 초기에 자동으로 열리지 않도록 설정\r\n");
      out.write("        modal: true, // 모달 형태로 표시\r\n");
      out.write("        buttons: {\r\n");
      out.write("            \"확인\": function() {\r\n");
      out.write("                // 비밀번호 변경 로직을 처리하는 함수 호출\r\n");
      out.write("                // 여기에 비밀번호 변경 처리 로직을 추가하세요\r\n");
      out.write("                alert(\"비밀번호 변경 로직을 처리합니다.\");\r\n");
      out.write("                \r\n");
      out.write("                // 다이얼로그 닫기\r\n");
      out.write("                $(this).dialog(\"close\");\r\n");
      out.write("            },\r\n");
      out.write("            \"취소\": function() {\r\n");
      out.write("                // 다이얼로그 닫기\r\n");
      out.write("                $(this).dialog(\"close\");\r\n");
      out.write("            }\r\n");
      out.write("        }\r\n");
      out.write("    });\r\n");
      out.write("\r\n");
      out.write("    \r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("    \r\n");
      out.write("});//ready\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("	function myReview() {\r\n");
      out.write("	    $(\".right-div\").empty();\r\n");
      out.write("	    var id = \"");
      out.print(userId);
      out.write("\";\r\n");
      out.write("	    var request = new XMLHttpRequest(); // request 변수를 선언\r\n");
      out.write("\r\n");
      out.write("	    request.open(\r\n");
      out.write("	        \"POST\",\r\n");
      out.write("	        \"http://localhost/theater_prj/SelectReviewServlet\",\r\n");
      out.write("	        true\r\n");
      out.write("	    );\r\n");
      out.write("	    request.setRequestHeader(\r\n");
      out.write("	        \"Content-Type\",\r\n");
      out.write("	        \"application/x-www-form-urlencoded; charset=UTF-8\"\r\n");
      out.write("	    );\r\n");
      out.write("\r\n");
      out.write("	    // 에러 핸들링\r\n");
      out.write("	    request.onerror = function() {\r\n");
      out.write("	        alert(\"요청을 보낼 때 오류가 발생했습니다.\");\r\n");
      out.write("	    };\r\n");
      out.write("\r\n");
      out.write("	    request.onreadystatechange = function() {\r\n");
      out.write("	        if (request.readyState == 4) {\r\n");
      out.write("	            if (request.status == 200) {\r\n");
      out.write("	                // 응답을 받으면 처리\r\n");
      out.write("	                var jsonResponse = request.responseText;\r\n");
      out.write("	                var responseObject = JSON.parse(jsonResponse);\r\n");
      out.write("\r\n");
      out.write("	                if (responseObject.success) {\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("	                    // 예매 내역을 담을 변수\r\n");
      out.write("	                    var reservationHTML = '';\r\n");
      out.write("\r\n");
      out.write("	                    // 예매 내역 데이터\r\n");
      out.write("	                    var reservationData = responseObject.result;\r\n");
      out.write("\r\n");
      out.write("	                    if (reservationData.length > 0) {\r\n");
      out.write("	                        // 각 예약 정보에 대해 HTML 생성\r\n");
      out.write("	                        reservationData.forEach(function (reservation) {\r\n");
      out.write("\r\n");
      out.write("	                            // 평가 점수를 받아서 별을 생성하는 함수\r\n");
      out.write("	                            function createStars(rating) {\r\n");
      out.write("	                                var stars = '';\r\n");
      out.write("	                                for (var i = 0; i < rating; i++) {\r\n");
      out.write("	                                    stars += '★';\r\n");
      out.write("	                                }\r\n");
      out.write("	                                for (var i = rating; i < 5; i++) {\r\n");
      out.write("	                                    stars += '☆';\r\n");
      out.write("	                                }\r\n");
      out.write("	                                return stars;\r\n");
      out.write("	                            }\r\n");
      out.write("\r\n");
      out.write("	                            // 평가 점수\r\n");
      out.write("	                            var rating = reservation.reviewScore || 0; // rating 값이 없으면 0으로 설정\r\n");
      out.write("	                            var starsHTML = createStars(rating);\r\n");
      out.write("	                            \r\n");
      out.write("	                            // 리뷰 내용 자르기\r\n");
      out.write(" 								var reviewContent = reservation.reviewContent\r\n");
      out.write("								\r\n");
      out.write("	                            var reviewClass = '';\r\n");
      out.write("	                            var buttonHTML = '';\r\n");
      out.write("	                            \r\n");
      out.write("	                            var reviewInputDate = reservation.reviewInputDate;\r\n");
      out.write("\r\n");
      out.write("	                            \r\n");
      out.write("	                            \r\n");
      out.write("	                            \r\n");
      out.write("\r\n");
      out.write("	                            if (reviewContent === 'null') {\r\n");
      out.write("	                                reviewContent = '리뷰를 입력해주세요!';\r\n");
      out.write("	                                reviewClass = 'no-review';\r\n");
      out.write("	                                buttonHTML = '<button type=\"button\" class=\"btn btn-danger float-end\" onclick=\"writeReview(\\''+ reservation.movieTitle + '\\', \\''  + reservation.reservationNumber + '\\', \\'' + reservation.movieCode +  '\\', \\'' + reservation.moviePosterPath +'\\')\">리뷰 작성</button>';\r\n");
      out.write("	                            } else {\r\n");
      out.write("	                                if (reviewContent.length > 20) {\r\n");
      out.write("	                                    reviewContent = reviewContent.substring(0, 20) + '....';\r\n");
      out.write("	                                }\r\n");
      out.write("	                                buttonHTML = '<button type=\"button\" class=\"btn btn-secondary float-end\" onclick=\"selectReviewDetail(\\''+ reservation.reviewNumber + '\\', \\'' + reservation.movieTitle + '\\', \\'' + reservation.reviewContent + '\\', \\'' + reservation.reviewScore + '\\', \\'' + reservation.moviePosterPath + '\\')\">상세보기</button>';\r\n");
      out.write("	                            }\r\n");
      out.write("	                          		\r\n");
      out.write("	                            // 문자열 연결 연산자를 사용하여 HTML 조립\r\n");
      out.write("	                            reservationHTML +=\r\n");
      out.write("	                                '<div class=\"container mt-5\">' +\r\n");
      out.write("	                                '<div class=\"card\">' +\r\n");
      out.write("	                                '<div class=\"card-body\">' +\r\n");
      out.write("	                                '<div class=\"row\" >' +\r\n");
      out.write("	                                '<div class=\"col-4\">' +\r\n");
      out.write("	                                '<div class=\"d-flex justify-content-center justify-content-md-start\">' +\r\n");
      out.write("	                                '<div class=\"aaaa\">' +\r\n");
      out.write("	                                '<img src=\"../images/movie/' + reservation.moviePosterPath + '\" alt=\"영화 포스터\" width=\"160\" height=\"160\">' +\r\n");
      out.write("	                                '</div>' +\r\n");
      out.write("	                                '</div>' +\r\n");
      out.write("	                                '</div>' +\r\n");
      out.write("	                                '<div class=\"col\">' +\r\n");
      out.write("	                                '<p style=\"margin-top: 5px;\"><strong>영화제목  </strong></p>' +\r\n");
      out.write("	                                '<div> ' + reservation.movieTitle + '</div>' +\r\n");
      out.write("	                                '<p style=\"margin-top: 5px;\"><strong>관람극장  </strong></p>' +\r\n");
      out.write("	                                '<div> ' + reservation.theaterName + ' ' + reservation.theaterNumber + '</div>' +\r\n");
      out.write("	                                '<p style=\"margin-top: 5px;\"><strong>관람일시  </strong></p>' +\r\n");
      out.write("	                                '<div> ' + reservation.screeningDate + ' ' +  reservation.screeningTime + '</div>' +\r\n");
      out.write("	                                '<p style=\"margin-top: 5px;\"><strong>평점  </strong></p>' +\r\n");
      out.write("	                                '<div> ' + starsHTML + '</div>' +\r\n");
      out.write("	                                '</div>' +\r\n");
      out.write("	                                '</div>' +\r\n");
      out.write("	                                '<div class=\"row\">' +\r\n");
      out.write("	                                '<div class=\"col text-start\">' +\r\n");
      out.write("	                                '<div style=\"margin-top: 15px; font-weight: bolder;\" class=\"' + reviewClass + '\"> ' + reviewContent + '</div>' + // 리뷰 내용 추가\r\n");
      out.write("	                                '</div>' +\r\n");
      out.write("	                                '<div class=\"col text-end\">' +\r\n");
      out.write("	                                buttonHTML +\r\n");
      out.write("	                                '</div>' +\r\n");
      out.write("	                                '</div>' +\r\n");
      out.write("	                                '</div>' +\r\n");
      out.write("	                                '</div>' +\r\n");
      out.write("	                                '</div>';\r\n");
      out.write("	                        });\r\n");
      out.write("	                    } else {\r\n");
      out.write("	                        reservationHTML =\r\n");
      out.write("	                            '<img src=\"../images/myPage/noReservation.png\" style=\"width: 330px; height: 330px; margin-left:100px;\">';\r\n");
      out.write("	                    }\r\n");
      out.write("\r\n");
      out.write("	                    // 생성된 예매 내역 HTML을 .right-div 요소에 삽입\r\n");
      out.write("	                    $(\".right-div\").html(reservationHTML);\r\n");
      out.write("	                } else {\r\n");
      out.write("	                    reservationHTML =\r\n");
      out.write("	                        '<img src=\"../images/myPage/noReservation.png\" style=\"width: 330px; height: 330px; margin-left:100px;\">';\r\n");
      out.write("	                    $(\".right-div\").html(reservationHTML);\r\n");
      out.write("	                }\r\n");
      out.write("	            } else {\r\n");
      out.write("	                alert(\"문제발생.\");\r\n");
      out.write("	            }\r\n");
      out.write("	        }\r\n");
      out.write("	    };\r\n");
      out.write("\r\n");
      out.write("	    // POST 요청의 파라미터를 설정하여 보냄\r\n");
      out.write("	    request.send(\"id=\" + encodeURIComponent(id));\r\n");
      out.write("	}//end myReview\r\n");
      out.write("\r\n");
      out.write("///////////////////////////////////////////////////////////////////////////////////////////\r\n");
      out.write("///////////////////////////////////////////////////////////////////////////////////////////\r\n");
      out.write("\r\n");
      out.write("	\r\n");
      out.write("	\r\n");
      out.write("// 리뷰 상세 조회\r\n");
      out.write("function selectReviewDetail(reviewNumber, movieTitle, reviewContent, reviewScore, moviePosterPath) {\r\n");
      out.write("   \r\n");
      out.write("\r\n");
      out.write("    // 기존에 있는 내용을 삭제\r\n");
      out.write("    $(\".right-div\").empty();\r\n");
      out.write("\r\n");
      out.write("    var year = new Date().getFullYear();\r\n");
      out.write("    var month = (\"0\" + (new Date().getMonth() + 1)).slice(-2); // 월을 두 자리로 표현\r\n");
      out.write("    var day = (\"0\" + new Date().getDate()).slice(-2); // 날짜를 두 자리로 표현\r\n");
      out.write("\r\n");
      out.write("    var today = year + '-' + month + '-' + day;\r\n");
      out.write("\r\n");
      out.write("    // 리뷰상세 디자인\r\n");
      out.write("var selectFormHTML =\r\n");
      out.write("    '<div class=\"update-container\">' +\r\n");
      out.write("    '<div class=\"sub-container\">' +\r\n");
      out.write("    '<div class=\"reviewInfo\">' +\r\n");
      out.write("    '<div class=\"postBox\" style=\"width: 150px; height: 170px;\">' +\r\n");
      out.write("    '<div style=\"width: 130px; height: 150px; margin-left:15px;\">' +\r\n");
      out.write("    '<img src=\"../images/movie/' + moviePosterPath + '\" alt=\"영화 포스터\" style=\"width: 130px; height: 150px; margin-top:10px;\">' +\r\n");
      out.write("    '</div>' +\r\n");
      out.write("    '</div>' +\r\n");
      out.write("    '<div class=\"infoBox\" style=\"width: 484px; height: 170px;\">' +\r\n");
      out.write("    '<div class=\"movieTitle\" style=\"width: 484px; height: 50px; margin-top:10px;\">' +\r\n");
      out.write("    '<div id=\"movieTitle\" style=\"width: 470px; margin-left:5px; margin-top:10px; font-size: 20px; font-weight: bold;\">' + movieTitle + '</div>' +\r\n");
      out.write("    '</div>' +\r\n");
      out.write("    '<div class=\"reviewDate\" style=\"width: 484px; height: 50px;\">' +\r\n");
      out.write("    '<div id=\"reviewInputDate\" style=\"width: 200px; margin-left:5px; margin-top:10px; font-size: 20px; font-weight: bold;\">' + today + '</div>' +\r\n");
      out.write("    '</div>' +\r\n");
      out.write("    '<div class=\"Rating\" style=\"width: 484px; height: 50px;\">' +\r\n");
      out.write("    '<div style=\"width: 70px; height: 40px;\">' +\r\n");
      out.write("    '<div style=\"width: 70px;\">' +\r\n");
      out.write("    '<div id=\"reviewRating\" style=\"margin-left:10px; margin-top:10px; font-size: 24px; font-weight: bold;\"> 별점 : </div>' +\r\n");
      out.write("    '</div>' +\r\n");
      out.write("    '</div>' +\r\n");
      out.write("    '<div style=\"margin-left:5px; margin-top:5px;\">' +\r\n");
      out.write("    '<select style=\"display: inline-block; width: 200px; height: 40px;\" class=\"form-select\" id=\"starScore\">' +\r\n");
      out.write("    '<option value=\"0\" ' + (reviewScore === 0 ? \"selected\" : \"\") + '>별점 선택</option>'; // reviewScore가 0이면 선택됨\r\n");
      out.write("for (var i = 1; i <= 5; i++) {\r\n");
      out.write("    var starText = '';\r\n");
      out.write("    for (var j = 0; j < i; j++) {\r\n");
      out.write("        starText += '⭐'; // 별점 개수에 따라 ⭐를 추가합니다.\r\n");
      out.write("    }\r\n");
      out.write("    selectFormHTML += '<option value=\"' + i + '\" ' + (parseInt(reviewScore) === i ? \"selected\" : \"\") + '>' + starText + '</option>'; // reviewScore와 같은 수의 별점이 선택됨\r\n");
      out.write("}\r\n");
      out.write("selectFormHTML +=\r\n");
      out.write("    '</select>' +\r\n");
      out.write("    '</div>' + // 별점 표시\r\n");
      out.write("    '</div>' +\r\n");
      out.write("    '</div>' +\r\n");
      out.write("    '</div>' +\r\n");
      out.write("    '<div class=\"reviewContent\">' +\r\n");
      out.write("    '<div style=\"margin-left: 15px;margin-top: 10px;\">' +\r\n");
      out.write("    '<textarea id=\"reviewContent\" class=\"form-control\"  name=\"reviewContent\" style=\"width: 600px; height: 100px;\">' + reviewContent + '</textarea>' +\r\n");
      out.write("    '</div>' +\r\n");
      out.write("    '</div>' +\r\n");
      out.write("    '<div class=\"buttonList\" style=\"margin-left:auto; margin-right: 15px;\">' +\r\n");
      out.write("    '<div class=\"reviewButtons\">' +\r\n");
      out.write("    '<button type=\"button\" class=\"btn btn-primary\" style=\"width: 80px; height: 50px; margin-right: 10px;\" onclick=\"updateReview(\\''+ reviewNumber + '\\');\">수정</button>' +\r\n");
      out.write("    '<button type=\"button\" class=\"btn btn-danger\" style=\"width: 80px; height: 50px; margin-right: 10px;\" onclick=\"deleteReview(\\''+ reviewNumber + '\\')\">삭제</button>' +\r\n");
      out.write("    '<button type=\"button\" class=\"btn btn-secondary\" style=\"width: 80px; height: 50px;\" onclick=\"myReview();\">취소</button>' +\r\n");
      out.write("    '</div>' +\r\n");
      out.write("    '</div>' +\r\n");
      out.write("    '</div>' +\r\n");
      out.write("    '</div>';\r\n");
      out.write("\r\n");
      out.write("    $(\".right-div\").append(selectFormHTML);\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("	function updateReview(reviewNumber){//리뷰 수정\r\n");
      out.write("\r\n");
      out.write("		var result = confirm(\"리뷰를 수정하시겠습니까?\");\r\n");
      out.write("	\r\n");
      out.write("		var reviewContent = $(\"#reviewContent\").val();\r\n");
      out.write("		var reviewScore = $(\"#starScore\").val();\r\n");
      out.write("		\r\n");
      out.write("		if (reviewScore==0) {\r\n");
      out.write("		    alert(\"별점을 선택해주세요.\");\r\n");
      out.write("		    return;\r\n");
      out.write("		}\r\n");
      out.write("		\r\n");
      out.write("		if(reviewContent==\"\"){\r\n");
      out.write("			alert(\"내용을 입력해주세요.\");\r\n");
      out.write("			return;\r\n");
      out.write("		}\r\n");
      out.write("\r\n");
      out.write("	\r\n");
      out.write("		if (result) {\r\n");
      out.write("\r\n");
      out.write("			\r\n");
      out.write("			var request = new XMLHttpRequest(); // request 변수를 선언\r\n");
      out.write("\r\n");
      out.write("			request\r\n");
      out.write("					.open(\r\n");
      out.write("							\"POST\",\r\n");
      out.write("							\"http://localhost/theater_prj/UpdateReviewServlet\",\r\n");
      out.write("							true);\r\n");
      out.write("			request.setRequestHeader(\"Content-Type\",\r\n");
      out.write("					\"application/x-www-form-urlencoded; charset=UTF-8\");\r\n");
      out.write("\r\n");
      out.write("			// 에러 핸들링\r\n");
      out.write("			request.onerror = function() {\r\n");
      out.write("				alert(\"요청을 보낼 때 오류가 발생했습니다.\");\r\n");
      out.write("			};\r\n");
      out.write("\r\n");
      out.write("			request.onreadystatechange = function() {\r\n");
      out.write("				if (request.readyState == 4) {\r\n");
      out.write("					if (request.status == 200) {\r\n");
      out.write("						 // 응답을 받으면 처리\r\n");
      out.write("			            var jsonResponse = request.responseText;\r\n");
      out.write("			            var responseObject = JSON.parse(jsonResponse);\r\n");
      out.write("			            if (responseObject.success) {\r\n");
      out.write("\r\n");
      out.write("			                alert(\"리뷰가 성공적으로 수정되었습니다.\");\r\n");
      out.write("			                myReview();\r\n");
      out.write("			                \r\n");
      out.write("\r\n");
      out.write("			            } else {\r\n");
      out.write("			                alert(\"리뷰수정에 실패했습니다.\");\r\n");
      out.write("			                return;\r\n");
      out.write("			            }//end else\r\n");
      out.write("					} else {\r\n");
      out.write("						alert(\"문제가 발생했습니다.\");\r\n");
      out.write("					}\r\n");
      out.write("				}\r\n");
      out.write("			};\r\n");
      out.write("\r\n");
      out.write("			// POST 요청의 파라미터를 설정하여 보냄\r\n");
      out.write("			request.send(\r\n");
      out.write("		    		\"reviewNumber=\" + encodeURIComponent(reviewNumber)\r\n");
      out.write("		    		+ \"&reviewContent=\" + encodeURIComponent(reviewContent)\r\n");
      out.write("		    		+ \"&reviewScore=\" + encodeURIComponent(reviewScore)\r\n");
      out.write("		    		)\r\n");
      out.write("		    		\r\n");
      out.write("					\r\n");
      out.write("			\r\n");
      out.write("			\r\n");
      out.write("			\r\n");
      out.write("		\r\n");
      out.write("			\r\n");
      out.write("			\r\n");
      out.write("			\r\n");
      out.write("			\r\n");
      out.write("			\r\n");
      out.write("			\r\n");
      out.write("			\r\n");
      out.write("			\r\n");
      out.write("			\r\n");
      out.write("			\r\n");
      out.write("			\r\n");
      out.write("			\r\n");
      out.write("			\r\n");
      out.write("			\r\n");
      out.write("			\r\n");
      out.write("			\r\n");
      out.write("			\r\n");
      out.write("			\r\n");
      out.write("			\r\n");
      out.write("			\r\n");
      out.write("			\r\n");
      out.write("			\r\n");
      out.write("			\r\n");
      out.write("			\r\n");
      out.write("		}\r\n");
      out.write("		\r\n");
      out.write("	\r\n");
      out.write("	}\r\n");
      out.write("	\r\n");
      out.write("	\r\n");
      out.write("	function deleteReview(reviewNumber){//리뷰 삭제\r\n");
      out.write("\r\n");
      out.write("		//alert(reviewNumber);\r\n");
      out.write("\r\n");
      out.write("		var result = confirm(\"리뷰를 삭제하시겠습니까?\");\r\n");
      out.write("		if (result) {\r\n");
      out.write("		    \r\n");
      out.write("\r\n");
      out.write("		    \r\n");
      out.write("			\r\n");
      out.write("			var request = new XMLHttpRequest(); // request 변수를 선언\r\n");
      out.write("\r\n");
      out.write("			request\r\n");
      out.write("					.open(\r\n");
      out.write("							\"POST\",\r\n");
      out.write("							\"http://localhost/theater_prj/DeleteReviewServlet\",\r\n");
      out.write("							true);\r\n");
      out.write("			request.setRequestHeader(\"Content-Type\",\r\n");
      out.write("					\"application/x-www-form-urlencoded; charset=UTF-8\");\r\n");
      out.write("\r\n");
      out.write("			// 에러 핸들링\r\n");
      out.write("			request.onerror = function() {\r\n");
      out.write("				alert(\"요청을 보낼 때 오류가 발생했습니다.\");\r\n");
      out.write("			};\r\n");
      out.write("\r\n");
      out.write("			request.onreadystatechange = function() {\r\n");
      out.write("				if (request.readyState == 4) {\r\n");
      out.write("					if (request.status == 200) {\r\n");
      out.write("						 // 응답을 받으면 처리\r\n");
      out.write("			            var jsonResponse = request.responseText;\r\n");
      out.write("			            var responseObject = JSON.parse(jsonResponse);\r\n");
      out.write("			            if (responseObject.success) {\r\n");
      out.write("\r\n");
      out.write("			                alert(\"리뷰가 성공적으로 삭제되었습니다.\");\r\n");
      out.write("			                myReview();\r\n");
      out.write("			                \r\n");
      out.write("\r\n");
      out.write("			            } else {\r\n");
      out.write("			                alert(\"리뷰삭제에 실패했습니다.\");\r\n");
      out.write("			                return;\r\n");
      out.write("			            }//end else\r\n");
      out.write("					} else {\r\n");
      out.write("						alert(\"문제가 발생했습니다.\");\r\n");
      out.write("					}\r\n");
      out.write("				}\r\n");
      out.write("			};\r\n");
      out.write("\r\n");
      out.write("			// POST 요청의 파라미터를 설정하여 보냄\r\n");
      out.write("			request.send(\"reviewNumber=\" + encodeURIComponent(reviewNumber));\r\n");
      out.write("		    \r\n");
      out.write("		    \r\n");
      out.write("		    \r\n");
      out.write("	\r\n");
      out.write("		    \r\n");
      out.write("		}\r\n");
      out.write("\r\n");
      out.write("		\r\n");
      out.write("\r\n");
      out.write("	}\r\n");
      out.write("	\r\n");
      out.write("	\r\n");
      out.write("	\r\n");
      out.write("	\r\n");
      out.write("	\r\n");
      out.write("	\r\n");
      out.write("	\r\n");
      out.write("	\r\n");
      out.write("	\r\n");
      out.write("	\r\n");
      out.write("	\r\n");
      out.write("	\r\n");
      out.write("	\r\n");
      out.write("	//리뷰 작성\r\n");
      out.write("function writeReview(movieTitle, reservationNumber, movieCode, moviePosterPath) {\r\n");
      out.write("\r\n");
      out.write("    \r\n");
      out.write("    var year = new Date().getFullYear();\r\n");
      out.write("    var month = (\"0\" + (new Date().getMonth() + 1)).slice(-2); // 월을 두 자리로 표현\r\n");
      out.write("    var day = (\"0\" + new Date().getDate()).slice(-2); // 날짜를 두 자리로 표현\r\n");
      out.write("\r\n");
      out.write("    var today = year + '-' + month + '-' + day;\r\n");
      out.write("\r\n");
      out.write("    // 기존에 있는 내용을 삭제\r\n");
      out.write("    $(\".right-div\").empty();\r\n");
      out.write("\r\n");
      out.write("    // 리뷰작성 디자인\r\n");
      out.write("    var insertFormHTML = \r\n");
      out.write("        '<div class=\"update-container\">' +\r\n");
      out.write("            '<div class=\"sub-container\">' +\r\n");
      out.write("                '<div class=\"reviewInfo\">' +\r\n");
      out.write("                    '<div class=\"postBox\" style=\"width: 150px; height: 170px;\">' +\r\n");
      out.write("                        '<div style=\"width: 130px; height: 150px; margin-left:15px;\">' +\r\n");
      out.write("                        '<img src=\"../images/movie/' + moviePosterPath + '\" alt=\"영화 포스터\" style=\"width: 130px; height: 150px; margin-top:10px;\">' +\r\n");
      out.write("                        '</div>' +\r\n");
      out.write("                    '</div>' +\r\n");
      out.write("                    '<div class=\"infoBox\" style=\"width: 484px; height: 170px;\">' +\r\n");
      out.write("                        '<div class=\"movieTitle\" style=\"width: 484px; height: 50px; margin-top:10px;\">' +\r\n");
      out.write("                            '<div id=\"movieTitle\" style=\"width: 470px; margin-left:5px; margin-top:10px; font-size: 20px; font-weight: bold;\">' + movieTitle + '</div>' +\r\n");
      out.write("                        '</div>' +\r\n");
      out.write("                        '<div class=\"reviewDate\" style=\"width: 484px; height: 50px;\">' +\r\n");
      out.write("                            '<div id=\"reviewInputDate\" style=\"width: 200px; margin-left:5px; margin-top:10px; font-size: 20px; font-weight: bold;\">' + today + '</div>' +\r\n");
      out.write("                        '</div>' +\r\n");
      out.write("                        '<div class=\"Rating\" style=\"width: 484px; height: 50px;\">' +\r\n");
      out.write("                            '<div style=\"width: 70px; height: 40px;\">' +\r\n");
      out.write("                                '<div style=\"width: 70px;\">' +\r\n");
      out.write("                                    '<div id=\"reviewRating\" style=\"margin-left:10px; margin-top:10px; font-size: 24px; font-weight: bold;\"> 별점 : </div>' +\r\n");
      out.write("                                '</div>' +\r\n");
      out.write("                            '</div>' +\r\n");
      out.write("                            '<div style=\"margin-left:5px; margin-top:5px;\">' +\r\n");
      out.write("                                '<select style=\"display: inline-block; width: 200px; height: 40px;\" class=\"form-select\" id=\"starScore\">' +\r\n");
      out.write("                                    '<option selected=\"selected\">별점 선택</option>' +\r\n");
      out.write("                                    '");
 for (int i = 1; i <= 5; i++) { 
      out.write("' +\r\n");
      out.write("                                        '<option value=\"");
      out.print(i);
      out.write("\">' +\r\n");
      out.write("                                            '");
 for (int j = 0; j < i; j++) { 
      out.write("' +\r\n");
      out.write("                                                '⭐' +\r\n");
      out.write("                                            '");
 } 
      out.write("' +\r\n");
      out.write("                                        '</option>' +\r\n");
      out.write("                                    '");
 } 
      out.write("' +\r\n");
      out.write("                                '</select>' +\r\n");
      out.write("                            '</div>' +\r\n");
      out.write("                        '</div>' +\r\n");
      out.write("                    '</div>' +\r\n");
      out.write("                '</div>' +\r\n");
      out.write("                '<div class=\"reviewContent\">' +\r\n");
      out.write("                    '<div style=\"margin-left: 15px;margin-top: 10px;\">' +\r\n");
      out.write("                        '<textarea id=\"reviewContent\" class=\"form-control\"  name=\"reviewContent\" style=\"width: 600px; height: 100px;\"></textarea>' +\r\n");
      out.write("                    '</div>' +\r\n");
      out.write("                '</div>' +\r\n");
      out.write("                '<div class=\"buttonList\" style=\"margin-left:auto; margin-right: 15px;\">' +\r\n");
      out.write("                    '<div class=\"reviewButtons\">' +\r\n");
      out.write("                        '<button type=\"button\" class=\"btn btn-primary\" style=\"width: 80px; height: 50px; margin-right: 10px;\" onclick=\"insertReview(\\''  + reservationNumber +  '\\', \\'' + movieCode  + '\\')\">등록</button>' +\r\n");
      out.write("                        '<button type=\"button\" class=\"btn btn-secondary\" style=\"width: 80px; height: 50px;\" onclick=\"myReview()\">취소</button>' +\r\n");
      out.write("                    '</div>' +\r\n");
      out.write("                '</div>' +\r\n");
      out.write("            '</div>' +\r\n");
      out.write("        '</div>';\r\n");
      out.write("\r\n");
      out.write("    $(\".right-div\").append(insertFormHTML);\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("function insertReview(reservationNumber,movieCode) {//리뷰등록메서드\r\n");
      out.write("\r\n");
      out.write("	var reviewContent = $(\"#reviewContent\").val();\r\n");
      out.write("	var starScore = $(\"#starScore\").val();\r\n");
      out.write("	\r\n");
      out.write("	if (isNaN(starScore)) {\r\n");
      out.write("	    alert(\"별점을 선택해주세요.\");\r\n");
      out.write("	    return;\r\n");
      out.write("	}\r\n");
      out.write("	\r\n");
      out.write("	if(reviewContent==\"\"){\r\n");
      out.write("		alert(\"내용을 입력해주세요.\");\r\n");
      out.write("		return;\r\n");
      out.write("	}\r\n");
      out.write("	\r\n");
      out.write("	\r\n");
      out.write("	\r\n");
      out.write("\r\n");
      out.write("    var request = new XMLHttpRequest(); // request 변수를 선언\r\n");
      out.write("\r\n");
      out.write("    request.open(\r\n");
      out.write("        \"POST\",\r\n");
      out.write("        \"http://localhost/theater_prj/InsertReviewServlet\",\r\n");
      out.write("        true\r\n");
      out.write("    );\r\n");
      out.write("    request.setRequestHeader(\r\n");
      out.write("        \"Content-Type\",\r\n");
      out.write("        \"application/x-www-form-urlencoded; charset=UTF-8\"\r\n");
      out.write("    );\r\n");
      out.write("\r\n");
      out.write("    // 에러 핸들링\r\n");
      out.write("    request.onerror = function() {\r\n");
      out.write("        alert(\"요청을 보낼 때 오류가 발생했습니다.\");\r\n");
      out.write("    };\r\n");
      out.write("\r\n");
      out.write("    request.onreadystatechange = function() {\r\n");
      out.write("    	var responseObject = JSON.parse(request.responseText);\r\n");
      out.write("        if (request.readyState == 4) {\r\n");
      out.write("            if (request.status == 200) {\r\n");
      out.write("				\r\n");
      out.write("            	if (responseObject.success) {\r\n");
      out.write("				alert(\"리뷰 등록을 완료했습니다.\");\r\n");
      out.write("				myReview();\r\n");
      out.write("            	}else{\r\n");
      out.write("				alert(\"리뷰 등록을 실패했습니다.\")\r\n");
      out.write("            	}\r\n");
      out.write("\r\n");
      out.write("            } else {\r\n");
      out.write("                alert(\"문제발생.\");\r\n");
      out.write("            }\r\n");
      out.write("        }\r\n");
      out.write("    };\r\n");
      out.write("\r\n");
      out.write("    // POST 요청의 파라미터를 설정하여 보냄\r\n");
      out.write("    request.send(\r\n");
      out.write("    		\"reservationNumber=\" + encodeURIComponent(reservationNumber)\r\n");
      out.write("    		+ \"&reviewContent=\" + encodeURIComponent(reviewContent)\r\n");
      out.write("    		+ \"&starScore=\" + encodeURIComponent(starScore)\r\n");
      out.write("    		+ \"&movieCode=\" + encodeURIComponent(movieCode));\r\n");
      out.write("    \r\n");
      out.write("    \r\n");
      out.write("    \r\n");
      out.write("    \r\n");
      out.write("    \r\n");
      out.write("    \r\n");
      out.write("    \r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write("	\r\n");
      out.write("	\r\n");
      out.write("	\r\n");
      out.write("	\r\n");
      out.write("	\r\n");
      out.write("	\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("function selectReservation() {\r\n");
      out.write("	$(\".right-div\").empty();\r\n");
      out.write("    var id = \"");
      out.print(userId);
      out.write("\";\r\n");
      out.write("    \r\n");
      out.write("    var request = new XMLHttpRequest(); // request 변수를 선언\r\n");
      out.write("\r\n");
      out.write("    request.open(\r\n");
      out.write("        \"POST\",\r\n");
      out.write("        \"http://localhost/theater_prj/SelectReservationServlet\",\r\n");
      out.write("        true\r\n");
      out.write("    );\r\n");
      out.write("    request.setRequestHeader(\r\n");
      out.write("        \"Content-Type\",\r\n");
      out.write("        \"application/x-www-form-urlencoded; charset=UTF-8\"\r\n");
      out.write("    );\r\n");
      out.write("\r\n");
      out.write("    // 에러 핸들링\r\n");
      out.write("    request.onerror = function() {\r\n");
      out.write("        alert(\"요청을 보낼 때 오류가 발생했습니다.\");\r\n");
      out.write("    };\r\n");
      out.write("\r\n");
      out.write("    request.onreadystatechange = function() {\r\n");
      out.write("        if (request.readyState == 4) {\r\n");
      out.write("            if (request.status == 200) {\r\n");
      out.write("                // 응답을 받으면 처리\r\n");
      out.write("                var jsonResponse = request.responseText;\r\n");
      out.write("                var responseObject = JSON.parse(jsonResponse);\r\n");
      out.write("			\r\n");
      out.write("                \r\n");
      out.write("                if (responseObject.success) {\r\n");
      out.write("\r\n");
      out.write("                    // 예매 내역을 담을 변수\r\n");
      out.write("                    var reservationHTML = '';\r\n");
      out.write("\r\n");
      out.write("                    // 예매 내역 데이터\r\n");
      out.write("                    var reservationData = responseObject.result;\r\n");
      out.write("                    \r\n");
      out.write("                    \r\n");
      out.write("                    if (reservationData.length > 0) {\r\n");
      out.write("                    \r\n");
      out.write("                  \r\n");
      out.write("\r\n");
      out.write("                    // 예매 내역 데이터를 reservationNumber를 기준으로 그룹화\r\n");
      out.write("                    var groupedReservations = {};\r\n");
      out.write("                    reservationData.forEach(function (reservation) {\r\n");
      out.write("                        if (!groupedReservations.hasOwnProperty(reservation.reservationNumber)) {\r\n");
      out.write("                            groupedReservations[reservation.reservationNumber] = [];\r\n");
      out.write("                        }\r\n");
      out.write("                        groupedReservations[reservation.reservationNumber].push(reservation);\r\n");
      out.write("                    });\r\n");
      out.write("\r\n");
      out.write("                    // 각 그룹별로 예매 내역 HTML 생성\r\n");
      out.write("                    Object.keys(groupedReservations).forEach(function (reservationNumber) {\r\n");
      out.write("                        var groupedReservation = groupedReservations[reservationNumber][0]; // 그룹 내 첫 번째 예매 내역 사용\r\n");
      out.write("\r\n");
      out.write("                        var seatNumbersCombined = groupedReservations[reservationNumber].map(function (reservation) {\r\n");
      out.write("                            return reservation.seatLownumber  + reservation.seatColnumber;\r\n");
      out.write("                        }).join(', '); // seatNumbers 결합\r\n");
      out.write("\r\n");
      out.write("                        // 문자열 연결 연산자를 사용하여 HTML 조립\r\n");
      out.write("                        reservationHTML += \r\n");
      out.write("                            '<div class=\"container mt-5\">' +\r\n");
      out.write("                                '<div class=\"card\">' +\r\n");
      out.write("                                    '<div class=\"card-body\">' +\r\n");
      out.write("                                        '<div class=\"row\" >' +\r\n");
      out.write("                                       \r\n");
      out.write("                                            '<div class=\"col col-3\">' +\r\n");
      out.write("                                                '<p style=\"margin-top: 5px;\"><strong>예매번호  </strong></p>' +\r\n");
      out.write("                                                '<div>' + groupedReservation.reservationNumber + '</div>' +\r\n");
      out.write("                                                '<p style=\"margin-top: 5px;\"><strong>결제날짜  </strong></p>' +\r\n");
      out.write("                                                '<div>' + groupedReservation.reservationDate + '</div>' +\r\n");
      out.write("                                            '</div>' +\r\n");
      out.write("                                            '<div class=\"col-4\">' +\r\n");
      out.write("                                                '<div class=\"d-flex justify-content-center justify-content-md-start\">' +\r\n");
      out.write("                                                    '<div class=\"aaaa\">' +\r\n");
      out.write("                                                    '<img src=\"../images/movie/' + groupedReservation.moviePosterPath + '\" alt=\"영화 포스터\" width=\"160\" height=\"160\">' +\r\n");
      out.write("                                                    '</div>' +\r\n");
      out.write("                                                '</div>' +\r\n");
      out.write("                                            '</div>' +\r\n");
      out.write("                                            '<div class=\"col\">' +\r\n");
      out.write("                                                '<p style=\"margin-top: 5px;\"><strong>영화제목  </strong></p>' +\r\n");
      out.write("                                                '<div> ' + groupedReservation.movieTitle + '</div>' +\r\n");
      out.write("                                                '<p style=\"margin-top: 5px;\"><strong>관람극장  </strong></p>' +\r\n");
      out.write("                                                '<div> ' + groupedReservation.theaterName + '</div>' +\r\n");
      out.write("                                                '<p style=\"margin-top: 5px;\"><strong>관람일시  </strong></p>' +\r\n");
      out.write("                                                '<div> ' + groupedReservation.screeningDate + '</div>' +\r\n");
      out.write("                                                '<p style=\"margin-top: 5px;\"><strong>관람좌석  </strong></p>' +\r\n");
      out.write("                                                '<div> ' + seatNumbersCombined + '</div>' +\r\n");
      out.write("                                            '</div>' +\r\n");
      out.write("                                        '</div>' +\r\n");
      out.write("                                        '<div class=\"row\">' +\r\n");
      out.write("                                     // selectReservation 함수 내에서 예매내역을 생성하는 부분 수정\r\n");
      out.write("                                        '<div class=\"col text-end\">' +\r\n");
      out.write("                                            '<p style=\"margin-top: 20px;\"><strong>총 결제금액    : </strong></p>' +\r\n");
      out.write("                                        '</div>' +\r\n");
      out.write("                                        '<div  style=\"margin-top: 15px;\" class=\"col text-start\">' +\r\n");
      out.write("                                            '<strong style=\"font-size: 20px ;\">' + groupedReservation.totalPrice +'원'+ '</strong>' +\r\n");
      out.write("                                        '</div>' +\r\n");
      out.write("                                        '<div class=\"col text-end\">' +\r\n");
      out.write("                                            '<button type=\"button\" class=\"btn btn-info float-end\" onclick=\"reservationDetail(\\'' + groupedReservation.reservationNumber + '\\')\">상세보기</button>' +\r\n");
      out.write("                                        '</div>' +\r\n");
      out.write("                                        '</div>' +\r\n");
      out.write("                                    '</div>' +\r\n");
      out.write("                                '</div>' +\r\n");
      out.write("                            '</div>';\r\n");
      out.write("                    });\r\n");
      out.write("\r\n");
      out.write("                   \r\n");
      out.write("                    \r\n");
      out.write("                    \r\n");
      out.write("                    \r\n");
      out.write("                    \r\n");
      out.write("                    \r\n");
      out.write("                    }//end if\r\n");
      out.write("                    \r\n");
      out.write("                    \r\n");
      out.write("                    \r\n");
      out.write("                    \r\n");
      out.write("                    \r\n");
      out.write("                    \r\n");
      out.write("                }else{\r\n");
      out.write("                	reservationHTML = \r\n");
      out.write("                		'<img src=\"../images/myPage/noReservation.png\" style=\"width: 330px; height: 330px; margin-left:100px;\">'\r\n");
      out.write("                \r\n");
      out.write("                }//end else\r\n");
      out.write("                \r\n");
      out.write("                // 생성된 예매 내역 HTML을 .right-div 요소에 삽입\r\n");
      out.write("                $(\".right-div\").html(reservationHTML);\r\n");
      out.write("			\r\n");
      out.write("                  \r\n");
      out.write("                \r\n");
      out.write("            } else {\r\n");
      out.write("                alert(\"문제발생.\");\r\n");
      out.write("            }\r\n");
      out.write("        }\r\n");
      out.write("    };\r\n");
      out.write("\r\n");
      out.write("    // POST 요청의 파라미터를 설정하여 보냄\r\n");
      out.write("    request.send(\"id=\" + encodeURIComponent(id));\r\n");
      out.write("}//end selectReservation\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("//예약 상세 조회\r\n");
      out.write("function reservationDetail(reservationNumber) {\r\n");
      out.write("    var request = new XMLHttpRequest(); // request 변수를 선언\r\n");
      out.write("\r\n");
      out.write("    request.open(\r\n");
      out.write("        \"POST\",\r\n");
      out.write("        \"http://localhost/theater_prj/SelectReservationDetailServlet\",\r\n");
      out.write("        true\r\n");
      out.write("    );\r\n");
      out.write("    request.setRequestHeader(\r\n");
      out.write("        \"Content-Type\",\r\n");
      out.write("        \"application/x-www-form-urlencoded; charset=UTF-8\"\r\n");
      out.write("    );\r\n");
      out.write("\r\n");
      out.write("    // 에러 핸들링\r\n");
      out.write("    request.onerror = function() {\r\n");
      out.write("        alert(\"요청을 보낼 때 오류가 발생했습니다.\");\r\n");
      out.write("    };\r\n");
      out.write("\r\n");
      out.write("    request.onreadystatechange = function() {\r\n");
      out.write("        if (request.readyState == 4) {\r\n");
      out.write("            if (request.status == 200) {\r\n");
      out.write("                // 응답을 받으면 처리\r\n");
      out.write("                var jsonResponse = request.responseText;\r\n");
      out.write("                var responseObject = JSON.parse(jsonResponse);\r\n");
      out.write("                \r\n");
      out.write("                if (responseObject.success) {\r\n");
      out.write("                    // 예약 내역을 담을 변수\r\n");
      out.write("                    var reservationHTML = '';\r\n");
      out.write("\r\n");
      out.write("                    // 예매 내역 데이터\r\n");
      out.write("                    var reservationData = responseObject.result;\r\n");
      out.write("\r\n");
      out.write("                    // 예매 내역 데이터를 reservationNumber를 기준으로 그룹화\r\n");
      out.write("                    var groupedReservations = {};\r\n");
      out.write("                    reservationData.forEach(function (reservation) {\r\n");
      out.write("                        if (!groupedReservations.hasOwnProperty(reservation.reservationNumber)) {\r\n");
      out.write("                            groupedReservations[reservation.reservationNumber] = [];\r\n");
      out.write("                        }\r\n");
      out.write("                        groupedReservations[reservation.reservationNumber].push(reservation);\r\n");
      out.write("                    });\r\n");
      out.write("\r\n");
      out.write("                 // 각 그룹별로 예매 내역 HTML 생성\r\n");
      out.write("                    Object.keys(groupedReservations).forEach(function (reservationNumber) {\r\n");
      out.write("                        var groupedReservation = groupedReservations[reservationNumber][0]; // 그룹 내 첫 번째 예매 내역 사용\r\n");
      out.write("\r\n");
      out.write("                        var seatNumbersCombined = groupedReservations[reservationNumber].map(function (reservation) {\r\n");
      out.write("                            return reservation.seatLownumber + reservation.seatColnumber;\r\n");
      out.write("                        }).join(', '); // seatNumbers 결합\r\n");
      out.write("\r\n");
      out.write("                        // 예매 내역 HTML 생성\r\n");
      out.write("                        var html = '<div class=\"container2\">' +\r\n");
      out.write("                            '<div class=\"top-section\">' +\r\n");
      out.write("                            '<div>예매 내역</div>' +\r\n");
      out.write("                            '</div>' +\r\n");
      out.write("                            '<div class=\"bottom-section\">' +\r\n");
      out.write("                            '<div class=\"left-div\">' +\r\n");
      out.write("                            '<div class=\"image-div\">' +\r\n");
      out.write("                            '<img src=\"../images/movie/' + groupedReservation.moviePosterPath + '\" alt=\"이미지_설명\" style=\"width:150px\">' +\r\n");
      out.write("                            '</div>' +\r\n");
      out.write("                            '</div>' +\r\n");
      out.write("                            '<div class=\"middle-div\">' +\r\n");
      out.write("                            '<div class=\"inner-div\">' +\r\n");
      out.write("                            '<div class=\"dynamic-value\">' +\r\n");
      out.write("                            '<p>예매번호 : <span id=\"booking-number\">' + groupedReservation.reservationNumber + '</span></p>' +\r\n");
      out.write("                            '</div>' +\r\n");
      out.write("                            '<div class=\"dynamic-value\">' +\r\n");
      out.write("                            '<p>영화명 : <span id=\"movie-title\">' + groupedReservation.movieTitle + '</span></p>' +\r\n");
      out.write("                            '</div>' +\r\n");
      out.write("                            '<div class=\"dynamic-value\">' +\r\n");
      out.write("                            '<p>극장 : <span id=\"theater\">' + groupedReservation.theaterName + '</span></p>' +\r\n");
      out.write("                            '</div>' +\r\n");
      out.write("                            '<div class=\"dynamic-value\">' +\r\n");
      out.write("                            '<p>상영관 : <span id=\"theater-room\">' + groupedReservation.theaterNumber + '</span></p>' +\r\n");
      out.write("                            '</div>' +\r\n");
      out.write("                            '<div class=\"dynamic-value\">' +\r\n");
      out.write("                            '<p>일시 : <span id=\"datetime\">' + groupedReservation.screeningDate + ' ' + groupedReservation.screeningTime + '</span></p>' +\r\n");
      out.write("                            '</div>' +\r\n");
      out.write("                            '<div class=\"dynamic-value\">' +\r\n");
      out.write("                            '<p>인원 : <span id=\"people\">' + groupedReservations[reservationNumber].length + '명</span></p>' +\r\n");
      out.write("                            '</div>' +\r\n");
      out.write("                            '<div class=\"dynamic-value\">' +\r\n");
      out.write("                            '<p>좌석 : <span id=\"seats\">' + seatNumbersCombined + '</span></p>' +\r\n");
      out.write("                            '</div>' +\r\n");
      out.write("                            '<div class=\"dynamic-value\">' +\r\n");
      out.write("                            '<p>결제금액 : <span id=\"payment-amount\">' + groupedReservation.totalPrice + '</span></p>' +\r\n");
      out.write("                            '</div>' +\r\n");
      out.write("                            '<div class=\"dynamic-value\">' +\r\n");
      out.write("                            '<p>결제수단 : <span id=\"payment-method\">' + groupedReservation.paymentMethod + '</span></p>' +\r\n");
      out.write("                            '</div>' +\r\n");
      out.write("                            '</div>' +\r\n");
      out.write("                            '</div>' +\r\n");
      out.write("                            '</div>' +\r\n");
      out.write("                            '<div class=\"buttom-section\">' +\r\n");
      out.write("                            '<div class=\"bottom-div\">' +\r\n");
      out.write("                            '<div class=\"bottom-div d-flex justify-content-center\">' +\r\n");
      out.write("                            '<button type=\"button\" class=\"btn btn-danger mx-2\" onclick=\"checkReservationTime(\\'' + groupedReservation.reservationNumber + '\\')\">예매취소</button>' +\r\n");
      out.write("                            '<button type=\"button\" onclick=\"selectReservation()\" class=\"btn btn-secondary mx-2\">목록으로</button>' +\r\n");
      out.write("                            '</div>' +\r\n");
      out.write("                            '</div>' +\r\n");
      out.write("                            '</div>' +\r\n");
      out.write("                            '</div>';\r\n");
      out.write("                        reservationHTML += html;\r\n");
      out.write("                    });\r\n");
      out.write("\r\n");
      out.write("                    // 생성된 예매 내역 HTML을 .right-div 요소에 삽입\r\n");
      out.write("                    $(\".right-div\").html(reservationHTML);\r\n");
      out.write("                } else {\r\n");
      out.write("                    alert(\"예약 상세 정보를 불러오는 데 실패했습니다.\");\r\n");
      out.write("                }\r\n");
      out.write("            } else {\r\n");
      out.write("                alert(\"서버 오류로 인해 예약 상세 정보를 불러오지 못했습니다.\");\r\n");
      out.write("            }\r\n");
      out.write("        }\r\n");
      out.write("    };\r\n");
      out.write("\r\n");
      out.write("    // POST 요청의 파라미터를 설정하여 보냄\r\n");
      out.write("    request.send(\"reservationNumber=\" + encodeURIComponent(reservationNumber));\r\n");
      out.write("}//reservationDetail\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("function checkReservationTime(reservationNumber){\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("	  // 알림창 생성\r\n");
      out.write("	  var confirmation = confirm(\"정말 취소하시겠습니까?\\n신용카드 결제내역의 경우\\n3~5 영업일 이내에 환불됩니다.\");\r\n");
      out.write("\r\n");
      out.write("	  // 확인 버튼이 눌렸을 때\r\n");
      out.write("	  if (confirmation) {//확인버튼 == 취소신청\r\n");
      out.write("\r\n");
      out.write("			var request = new XMLHttpRequest(); // request 변수를 선언\r\n");
      out.write("\r\n");
      out.write("			request\r\n");
      out.write("					.open(\r\n");
      out.write("							\"POST\",\r\n");
      out.write("							\"http://localhost/theater_prj/CheckReservationTimeServlet\",\r\n");
      out.write("							true);\r\n");
      out.write("			request.setRequestHeader(\"Content-Type\",\r\n");
      out.write("					\"application/x-www-form-urlencoded; charset=UTF-8\");\r\n");
      out.write("\r\n");
      out.write("			// 에러 핸들링\r\n");
      out.write("			request.onerror = function() {\r\n");
      out.write("				alert(\"요청을 보낼 때 오류가 발생했습니다.\");\r\n");
      out.write("			};\r\n");
      out.write("\r\n");
      out.write("			request.onreadystatechange = function() {\r\n");
      out.write("				if (request.readyState == 4) {\r\n");
      out.write("					if (request.status == 200) {\r\n");
      out.write("						 // 응답을 받으면 처리\r\n");
      out.write("			            var jsonResponse = request.responseText;\r\n");
      out.write("			            var responseObject = JSON.parse(jsonResponse);\r\n");
      out.write("			            if (responseObject.success) {\r\n");
      out.write("\r\n");
      out.write("			                //취소메서드 있는곳\r\n");
      out.write("			            	deleteReservation(reservationNumber);\r\n");
      out.write("			                \r\n");
      out.write("\r\n");
      out.write("			            } else {\r\n");
      out.write("			                alert(\"상영이 이미 시작된 영화는 예매를 취소할 수 없습니다.\");\r\n");
      out.write("			                return;\r\n");
      out.write("			            }//end else\r\n");
      out.write("					} else {\r\n");
      out.write("						alert(\"문제가 발생했습니다.\");\r\n");
      out.write("					}\r\n");
      out.write("				}\r\n");
      out.write("			};\r\n");
      out.write("\r\n");
      out.write("			// POST 요청의 파라미터를 설정하여 보냄\r\n");
      out.write("			request.send(\"reservationNumber=\" + encodeURIComponent(reservationNumber));\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("	  }\r\n");
      out.write("}//checkReservationTime\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("function deleteReservation(reservationNumber) {\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("    var request = new XMLHttpRequest();\r\n");
      out.write("\r\n");
      out.write("    request.open(\r\n");
      out.write("        \"POST\",\r\n");
      out.write("        \"http://localhost/theater_prj/DeleteReservationServlet\",\r\n");
      out.write("        true\r\n");
      out.write("    );\r\n");
      out.write("    request.setRequestHeader(\r\n");
      out.write("        \"Content-Type\",\r\n");
      out.write("        \"application/x-www-form-urlencoded; charset=UTF-8\"\r\n");
      out.write("    );\r\n");
      out.write("\r\n");
      out.write("    request.onerror = function() {\r\n");
      out.write("        alert(\"요청을 보낼 때 오류가 발생했습니다.\");\r\n");
      out.write("    };\r\n");
      out.write("\r\n");
      out.write("    request.onreadystatechange = function() {\r\n");
      out.write("        if (request.readyState == 4) {\r\n");
      out.write("            if (request.status == 200) {\r\n");
      out.write("                var jsonResponse = request.responseText;\r\n");
      out.write("                var responseObject = JSON.parse(jsonResponse);\r\n");
      out.write("                if (responseObject.success) {\r\n");
      out.write("                    alert(\"예매가 성공적으로 취소되었습니다.\");\r\n");
      out.write("                    selectReservation();\r\n");
      out.write("                } else {\r\n");
      out.write("                    alert(\"예매 취소를 실패하였습니다.\");\r\n");
      out.write("                }\r\n");
      out.write("            } else {\r\n");
      out.write("                alert(\"문제가 발생했습니다.\");\r\n");
      out.write("            }\r\n");
      out.write("        }\r\n");
      out.write("    };\r\n");
      out.write("\r\n");
      out.write("    request.send(\"reservationNumber=\" + encodeURIComponent(reservationNumber));\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("function handleKeyPress(event) {\r\n");
      out.write("    // 브라우저에 따라 이벤트 코드가 다르므로, 이벤트 코드를 통해 엔터 키를 감지합니다.\r\n");
      out.write("    var keycode = (event.keyCode ? event.keyCode : event.which);\r\n");
      out.write("    if (keycode == '13') { // 엔터 키의 키코드는 13입니다.\r\n");
      out.write("        event.preventDefault(); // 기본 동작 중단\r\n");
      out.write("        // 엔터 키가 눌렸을 때 checkNull() 함수 호출\r\n");
      out.write("        checkNull();\r\n");
      out.write("    }\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("function checkNull(){//비밀번호 확인 유효성 검사\r\n");
      out.write("\r\n");
      out.write("    // 입력된 비밀번호 가져오기\r\n");
      out.write("    var currentPassword = $(\"#currentPassword\").val();\r\n");
      out.write("    \r\n");
      out.write("  	//비밀번호 미입력시 return\r\n");
      out.write("    if (!currentPassword) {\r\n");
      out.write("	\r\n");
      out.write("        alert(\"비밀번호를 입력해주세요.\");\r\n");
      out.write("        \r\n");
      out.write("        return;\r\n");
      out.write("	}\r\n");
      out.write("  	\r\n");
      out.write("    checkPassword(currentPassword);\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("function showMyInformation() {\r\n");
      out.write("    $(\".right-div\").empty();\r\n");
      out.write("\r\n");
      out.write("    var userInformationHTML = `\r\n");
      out.write("        <div class=\"box-contents newtype\">\r\n");
      out.write("            <div class=\"user-information-box\">\r\n");
      out.write("                <table class=\"table table-striped\">\r\n");
      out.write("                    <tr>\r\n");
      out.write("                        <td><span>아이디:</span></td>\r\n");
      out.write("                        <td><strong>");
      out.print(session.getAttribute("id"));
      out.write("</strong></td>\r\n");
      out.write("                    </tr>\r\n");
      out.write("                    <tr>\r\n");
      out.write("                        <td><span>이름:</span></td>\r\n");
      out.write("                        <td><strong>");
      out.print(session.getAttribute("userName"));
      out.write("</strong></td>\r\n");
      out.write("                    </tr>\r\n");
      out.write("                    <tr>\r\n");
      out.write("                        <td><span>생년월일:</span></td>\r\n");
      out.write("                        <td><strong>");
      out.print(session.getAttribute("userBirthDay"));
      out.write("</strong></td>\r\n");
      out.write("                    </tr>\r\n");
      out.write("                    <tr>\r\n");
      out.write("                        <td><span>비밀번호:</span></td>\r\n");
      out.write("                        <td>\r\n");
      out.write("                            <button type=\"button\" id=\"changePasswordButton\" onclick=\"changePWWin()\" class=\"btn btn-primary\">비밀번호 변경</button>\r\n");
      out.write("                        </td>\r\n");
      out.write("                    </tr>\r\n");
      out.write("                </table>\r\n");
      out.write("            </div>\r\n");
      out.write("        </div>`;\r\n");
      out.write("\r\n");
      out.write("    $(\".right-div\").html(userInformationHTML);\r\n");
      out.write("}\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("function checkPassword(currentPassword) {//비밀번호 확인 메서드\r\n");
      out.write("\r\n");
      out.write("	\r\n");
      out.write("	\r\n");
      out.write("	var id = \"");
      out.print(userId);
      out.write("\" ;\r\n");
      out.write("	var password = currentPassword;\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("	//alert(\"id : \"+id + \"pw : \"+password);\r\n");
      out.write("		\r\n");
      out.write("		var request = new XMLHttpRequest(); // request 변수를 선언\r\n");
      out.write("\r\n");
      out.write("		request\r\n");
      out.write("				.open(\r\n");
      out.write("						\"POST\",\r\n");
      out.write("						\"http://localhost/theater_prj/CheckPasswordServlet\",\r\n");
      out.write("						true);\r\n");
      out.write("		request.setRequestHeader(\"Content-Type\",\r\n");
      out.write("				\"application/x-www-form-urlencoded; charset=UTF-8\");\r\n");
      out.write("\r\n");
      out.write("		// 에러 핸들링\r\n");
      out.write("		request.onerror = function() {\r\n");
      out.write("			alert(\"요청을 보낼 때 오류가 발생했습니다.\");\r\n");
      out.write("		};\r\n");
      out.write("\r\n");
      out.write("		request.onreadystatechange = function() {\r\n");
      out.write("			if (request.readyState == 4) {\r\n");
      out.write("				if (request.status == 200) {\r\n");
      out.write("					 // 응답을 받으면 처리\r\n");
      out.write("		            var jsonResponse = request.responseText;\r\n");
      out.write("		            var responseObject = JSON.parse(jsonResponse);\r\n");
      out.write("		            if (responseObject.success) {\r\n");
      out.write("		                alert(\"비밀번호가 일치합니다.\");\r\n");
      out.write("		                showMyInformation(); // 비밀번호가 일치할 때 실행할 함수 호출\r\n");
      out.write("		            } else {\r\n");
      out.write("		                alert(\"비밀번호가 일치하지 않습니다.\");\r\n");
      out.write("		            }//end else\r\n");
      out.write("				} else {\r\n");
      out.write("					alert(\"비밀번호 확인중 문제가 발생했습니다.\");\r\n");
      out.write("				}\r\n");
      out.write("			}\r\n");
      out.write("		};\r\n");
      out.write("\r\n");
      out.write("		// POST 요청의 파라미터를 설정하여 보냄\r\n");
      out.write("		request.send(\"id=\" + encodeURIComponent(id) + \"&password=\" + encodeURIComponent(password));\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("	\r\n");
      out.write("\r\n");
      out.write("}//checkPassword\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("function changePWWin() {\r\n");
      out.write("    // 자식 창이 열릴 때 부모 창을 모달로 만듭니다.\r\n");
      out.write("    var parentWindow = window;\r\n");
      out.write("    var childWindow = window.open('changePWForm.jsp', 'changePWForm', \r\n");
      out.write("        'width=472, height=340, top=' + (window.screenY + 100) + ', left=' + (window.screenX + 100)+', resizable=false');	\r\n");
      out.write("    \r\n");
      out.write("\r\n");
      out.write("    \r\n");
      out.write("    // 자식 창이 닫힐 때 부모 창을 클릭 가능하도록 만듭니다.\r\n");
      out.write("    var checkChildInterval = setInterval(function() {\r\n");
      out.write("        if (childWindow.closed) {\r\n");
      out.write("            clearInterval(checkChildInterval); // Interval 종료\r\n");
      out.write("            parentWindow.focus(); // 부모 창을 활성화\r\n");
      out.write("        }\r\n");
      out.write("    }, 1000);\r\n");
      out.write("} //changePWForm.jsp\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("</script>\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("</head>\r\n");
      out.write("<body>\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("	<!-- S Header -->\r\n");
      out.write("	");
      org.apache.jasper.runtime.JspRuntimeLibrary.include(request, response, "header.jsp", out, false);
      out.write("\r\n");
      out.write("	<!-- E Header -->\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("	<!-- S 로그인 세션 확인  -->\r\n");
      out.write("	");

	// 세션에서 로그인 여부 확인
	String id = (String) session.getAttribute("id");
	if (id == null) {// 로그인되지 않은 경우 로그인 페이지로 리디렉션
	
      out.write("\r\n");
      out.write("	<script type=\"text/javascript\">\r\n");
      out.write("    window.location.href = \"login.jsp?prevPage=myPage.jsp\";\r\n");
      out.write("    </script>\r\n");
      out.write("	");

	}
	
      out.write("\r\n");
      out.write("	<!-- E 로그인 세션 확인  -->\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("	<!-- Contaniner -->\r\n");
      out.write("	<div id=\"contaniner\" class=\"\">\r\n");
      out.write("		<!-- 벽돌 배경이미지 사용 시 class=\"bg-bricks\" 적용 / 배경이미지가 없을 경우 class 삭제  -->\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("		<!-- Contents Area -->\r\n");
      out.write("		<div id=\"contents\" class=\"\">\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("			<!-- Contents Start -->\r\n");
      out.write("\r\n");
      out.write("			<div class=\"sect-common\">\r\n");
      out.write("				<div class=\"mycgv-info-wrap\">\r\n");
      out.write("					<div class=\"side-menu\">\r\n");
      out.write("\r\n");
      out.write("						<div class=\"left-div\">\r\n");
      out.write("							<div class=\"cols-content\" id=\"menu\">\r\n");
      out.write("								<div class=\"col-aside\">\r\n");
      out.write("\r\n");
      out.write("									<h2>MY CGV 서브메뉴</h2>\r\n");
      out.write("									<div class=\"snb\">\r\n");
      out.write("										<ul>\r\n");
      out.write("											<li class=\"on\"><a title=\"현재 선택\">MY 띵화관<i></i></a></li>\r\n");
      out.write("											<li><a>나의 예매내역 <i></i></a></li>\r\n");
      out.write("											<li><a>내가 본 영화 <i></i></a></li>\r\n");
      out.write("											<li><a>개인 정보 변경 <i></i></a></li>\r\n");
      out.write("										</ul>\r\n");
      out.write("\r\n");
      out.write("									</div>\r\n");
      out.write("								</div>\r\n");
      out.write("\r\n");
      out.write("							</div>\r\n");
      out.write("\r\n");
      out.write("						</div>\r\n");
      out.write("\r\n");
      out.write("						<div class=\"right-div\">마이페이지에 추가할거 추천받아엽;;;</div>\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("					\r\n");
      out.write("\r\n");
      out.write("					</div>\r\n");
      out.write("				</div>\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("			</div>\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("			<!--/ Contents End -->\r\n");
      out.write("		</div>\r\n");
      out.write("		<!-- /Contents Area -->\r\n");
      out.write("	</div>\r\n");
      out.write("	<!-- E Contaniner -->\r\n");
      out.write("\r\n");
      out.write("	<!-- S Footer -->\r\n");
      out.write("	");
      org.apache.jasper.runtime.JspRuntimeLibrary.include(request, response, "footer.jsp", out, false);
      out.write("\r\n");
      out.write("	<!-- E Footer -->\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("</body>\r\n");
      out.write("</html>\r\n");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try {
            if (response.isCommitted()) {
              out.flush();
            } else {
              out.clearBuffer();
            }
          } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
